{"mappings":"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","sources":["src/js/components/GalleryAPI.js","src/js/utils/IDsToGenresParser.js","src/js/libs/BackendConfigStorage.js","src/js/libs/TMDBAPI.js","src/js/utils/WebStorageMethods.js","src/js/components/Spinner.js","src/js/utils/LibraryDataStorageAPI.js","src/js/components/PaginationAPI.js","src/js/components/NotificationAPI.js","src/js/components/MovieModalHandler.js","src/js/components/teamModalWindow.js","src/js/components/scroll.js","src/js/components/colorTheme.js"],"sourcesContent":["import { IDsParser } from '../utils/IDsToGenresParser';\nimport { BackendConfigStorage } from '../libs/BackendConfigStorage.js';\nimport { Spinner } from '../components/Spinner';\n\nexport class GalleryAPI {\n  #loadedImages = 0;\n  #totalImages = 0;\n  #pathToPoster = '';\n  #rootEl = null;\n  #onCriticalImagesLoadedCallbacks = [];\n  #onDeleteButtonClickedCB = null;\n  #onMovieCardClickedCB = null;\n  #currentMoviesData = null;\n  #spinner = null;\n  #posterImageCSSClass = 'movie-card__img';\n\n  #renderCloseButton = null;\n\n  #MAX_NUM_OF_CRIT_IMAGES = 3;\n  #NUMB_OF_IMAGES_TO_LOAD_AT_ONCE = 3;\n  #numberOfCriticalImages = null;\n  #imagesElsToLoad = null;\n\n  constructor(\n    rootElementSelector,\n    renderCloseButton = false,\n    onMovieCardClickedCB = () => {},\n    onDeleteButtonClickedCB = () => {}\n  ) {\n    this.#rootEl = document.querySelector(rootElementSelector);\n    this.#renderCloseButton = renderCloseButton;\n    this.#onMovieCardClickedCB = onMovieCardClickedCB;\n    this.#onDeleteButtonClickedCB = onDeleteButtonClickedCB;\n    this.#pathToPoster = BackendConfigStorage.pathToPoster;\n    this.#spinner = new Spinner('.gallery', 'loader-gallery');\n    this.#rootEl.addEventListener('click', this.#onCardClicked);\n  }\n\n  addOnCardClickCallback(cb) {\n    this.#rootEl.addEventListener('click', cb);\n  }\n\n  removeOnCardClickCallback(cb) {\n    this.#rootEl.removeEventListener('click', cb);\n  }\n\n  /**\n   * It routs click events\n   * @returns nothing\n   */\n  #onCardClicked = e => {\n    const movieCardLink = e.target.closest('a');\n    const clickedElNodeName = e.target.nodeName;\n    e.preventDefault();\n\n    if (!movieCardLink) {\n      return;\n    }\n\n    const movieId = movieCardLink.dataset.movieId;\n    //if we clicked remove button - call specific callback asynchronously and exit from function\n    if (clickedElNodeName === 'BUTTON') {\n      Promise.resolve(\n        (() => {\n          this.#onDeleteButtonClickedCB(movieId);\n        })()\n      );\n\n      return;\n    }\n\n    //we clicked to movie card - call specific callback asynchronously\n    Promise.resolve(\n      (() => {\n        this.#onMovieCardClickedCB(movieId);\n      })()\n    );\n  };\n\n  addOnCriticalImagesLoadedCallback(cb) {\n    this.#onCriticalImagesLoadedCallbacks.push(cb);\n  }\n\n  removeOnCriticalImagesLoadedCallback(cb) {\n    this.#onCriticalImagesLoadedCallbacks =\n      this.#onCriticalImagesLoadedCallbacks.filter(\n        existCallback => existCallback !== cb\n      );\n  }\n\n  renderMoviesCards(moviesData) {\n    this.#currentMoviesData = moviesData;\n\n    this.#spinner.show();\n\n    //set constants according to device\n    if (window.matchMedia('(max-width: 1280px)').matches)\n      this.#MAX_NUM_OF_CRIT_IMAGES = 2;\n    if (window.matchMedia('(max-width: 768px)').matches) {\n      this.#MAX_NUM_OF_CRIT_IMAGES = 1;\n      this.#NUMB_OF_IMAGES_TO_LOAD_AT_ONCE = 2;\n    }\n    //reset Gallery state\n    this.#numberOfCriticalImages = this.#MAX_NUM_OF_CRIT_IMAGES;\n    let imgsWithPoster = 0;\n    let isAllCriticalAdded = false;\n    this.#untrackImagesLoadingEnd();\n    //create markup\n    const cardsMarkup = moviesData.reduce((acc, movieData, indx, arr) => {\n      const { markup, hasPoster } = this.#createMovieCardMarkup(\n        movieData,\n        arr[indx - 1]?.id,\n        arr[indx + 1]?.id,\n        !isAllCriticalAdded\n      );\n\n      if (hasPoster) imgsWithPoster++;\n      if (\n        imgsWithPoster === this.#numberOfCriticalImages &&\n        !isAllCriticalAdded\n      )\n        isAllCriticalAdded = true;\n\n      return (acc += markup);\n    }, '');\n    //actual created images number is lesser than wanted tracked one, so must set it to real one\n    if (imgsWithPoster < this.#numberOfCriticalImages)\n      this.#numberOfCriticalImages = imgsWithPoster;\n    this.#totalImages = imgsWithPoster;\n\n    //render images to gallery\n    this.#rootEl.innerHTML = cardsMarkup;\n    //if there is posters with images then load them in batches (progressive) else hide spinner\n    if (imgsWithPoster) {\n      this.#trackImagesLoadingEnd();\n      this.#imagesElsToLoad = [\n        ...document.querySelectorAll(`.${this.#posterImageCSSClass}[data-src]`),\n      ];\n    } else this.#spinner.hide();\n  }\n\n  #createMovieCardMarkup(\n    {\n      poster_path,\n      title,\n      name,\n      genre_ids,\n      vote_average,\n      release_date,\n      first_air_date,\n      id,\n    },\n    prevMovieID,\n    nextMovieID,\n    canBeCritical\n  ) {\n    const releaseDate = (release_date ?? first_air_date)?.slice(0, 4) ?? '';\n    const rating = vote_average ? Number(vote_average).toFixed(1) : 'N/D';\n    let genresStr = this.#parseIDsToGenresString(genre_ids);\n    const movieName = title ?? name;\n    const hasPoster = !!poster_path;\n    const mustBeCritical = hasPoster && canBeCritical;\n\n    // prettier-ignore\n    const posterEl =\n      poster_path ? \n      `<img\n        class=\"${this.#posterImageCSSClass}\"\n        ${mustBeCritical\n          ?\n          `src=\"${this.#pathToPoster}w500${poster_path}\"` \n          : \n          `src=\"#\" data-src=\"${this.#pathToPoster}w500${poster_path}\"`\n          }\n        alt=\"Poster of the ${movieName} movie\"\n      />`\n      : \n      `<span class=\"movie-card__poster-placeholder\">\n        <span class=\"movie-card__placeholder-title-wrapper\">\n          <span class=\"movie-card__poster-placeholder--title\">\n           ${movieName}\n          </span>\n        </span>\n      has no poster\n      </span>`;\n    // prettier-ignore\n    const closeButtonEl = this.#renderCloseButton\n      ? `<button\n          aria-label=\"Delete movie from library\"\n          class=\"movie-card__delete-button\"\n          data-modal-close\n        >\n          <svg class=\"movie-card__icon\" viewBox=\"0 0 32 32\" width=\"10\" height=\"10\">\n            <path d=\"M31.439 3.166l-3.166-3.166-12.554 12.552-12.552-12.552-3.166 3.166 12.552 12.552-12.552 12.554 3.166 3.166 12.552-12.554 12.554 12.554 3.166-3.166-12.554-12.554 12.554-12.552z\"></path>          </svg>\n        </button>`\n      : '';\n\n    const imgThumbAdditionalClasses =\n      (hasPoster ? '' : 'movie-card__img-thumb--no-poster') +\n      ' ' +\n      (hasPoster && !mustBeCritical\n        ? 'movie-card__img-thumb--img-loading'\n        : '');\n\n    // prettier-ignore\n    const markup =\n      `<li class=\"movie-card\">\n        <a class=\"movie-card__link\" href=\"/\" data-movie-id=\"${id}\" \n          data-prev-movie-id=\"${prevMovieID ?? '' }\" data-next-movie-id=\"${ nextMovieID ?? '' }\">\n          <div class=\"movie-card__img-thumb ${imgThumbAdditionalClasses}\"\n            >\n            ${closeButtonEl}\n            ${posterEl}\n          </div>\n          <h3 class=\"movie-card__title\">${movieName}</h3>\n          <ul class=\"movie-card__movie-info-wrapper\">\n            <li class=\"movie-card__item movie-card__item--hidden-overflow\">\n              <p class=\"movie-card__genres\">${genresStr}</p>\n            </li>\n            <li class=\"movie-card__item\">\n              <p class=\"movie-card__release-date\">${genresStr ? '&nbsp;|&nbsp' : \"\"}${releaseDate}</p>\n            </li>\n            <li class=\"movie-card__item movie-card__item--accent\">\n              <p class=\"movie-card__rating\">${rating}</p>\n            </li>\n          </ul>\n        </a>\n      </li>`;\n\n    return { markup, hasPoster };\n  }\n\n  #parseIDsToGenresString(IDs) {\n    if (!IDs?.length) return '';\n\n    const isTooManyIDs = IDs.length > 2;\n    const ids = isTooManyIDs ? IDs.slice(0, 2) : IDs;\n\n    let parsedGenres = IDsParser.idsToGenres(ids);\n    parsedGenres += isTooManyIDs ? ', Other' : '';\n\n    return parsedGenres;\n  }\n\n  #onImageLoaded = e => {\n    const currentImageEl = e.target;\n\n    //accept events only from images with correct \"src\" attribute value\n    if (currentImageEl.getAttribute('src') === '#') return;\n\n    this.#loadedImages++;\n    const numbOfImgsToLoadAtOnce = this.#NUMB_OF_IMAGES_TO_LOAD_AT_ONCE;\n    const numberOfCriticalImages = this.#numberOfCriticalImages;\n    currentImageEl.removeEventListener('load', this.#onImageLoaded);\n    //load next bunch of images if there any or it's a last bunch of images\n    //it just works\n    if (\n      !(this.#loadedImages < numberOfCriticalImages) &&\n      (this.#loadedImages === numberOfCriticalImages ||\n        !(\n          (this.#loadedImages - numberOfCriticalImages) %\n          numbOfImgsToLoadAtOnce\n        ) ||\n        this.#totalImages - this.#loadedImages < numbOfImgsToLoadAtOnce)\n    ) {\n      let counter = 0;\n      while (\n        counter < numbOfImgsToLoadAtOnce &&\n        this.#imagesElsToLoad?.length\n      ) {\n        const imageToLoadEl = this.#imagesElsToLoad.shift();\n        const imgToLoadThumbEl = imageToLoadEl.closest(\n          '.movie-card__img-thumb'\n        );\n        const pathToPoster = imageToLoadEl.dataset.src;\n        imageToLoadEl.removeAttribute('data-src');\n        imageToLoadEl.src = pathToPoster;\n        //remove placeholder, which showed while image loading\n        imgToLoadThumbEl.classList.remove('movie-card__img-thumb--img-loading');\n        counter++;\n      }\n    }\n\n    if (this.#loadedImages === numberOfCriticalImages && this.#totalImages) {\n      this.#spinner.hide();\n      this.#onCriticalImagesLoadedCallbacks.forEach(cb => cb());\n    }\n\n    //image loading failed, show fallback instead\n    const currImgThumbEl = currentImageEl.closest('.movie-card__img-thumb');\n    if (e.type === 'error') {\n      //it checks for image loaded flag after some timeout, because sometimes we get events with \"error\" type for loaded images\n      setTimeout(() => {\n        if (!currentImageEl.complete)\n          currImgThumbEl?.classList.add('movie-card__img-thumb--img-fallback');\n      }, 250);\n    }\n  };\n  //12\n  #trackImagesLoadingEnd() {\n    const allImagesEls = document.querySelectorAll(\n      `.${this.#posterImageCSSClass}`\n    );\n\n    [...allImagesEls].forEach(el => {\n      el.addEventListener('load', this.#onImageLoaded);\n      el.addEventListener('error', this.#onImageLoaded);\n    });\n  }\n\n  #untrackImagesLoadingEnd() {\n    const allImagesEls = document.querySelectorAll(\n      `.${this.#posterImageCSSClass}`\n    );\n\n    this.#loadedImages = 0;\n    [...allImagesEls].forEach(el => {\n      el.removeEventListener('load', this.#onImageLoaded);\n      el.removeEventListener('error', this.#onImageLoaded);\n    });\n  }\n\n  get currentRenderedMoviesData() {\n    return this.#currentMoviesData;\n  }\n}\n","import { BackendConfigStorage } from '../libs/BackendConfigStorage.js';\n\nexport class IDsParser {\n  constructor() {}\n\n  /**\n   *Function that takes array with IDs and return string, that contain all genres corresponding to passed IDs\n   * @param {string []} ids - array that contains IDs in string format.\n   * @param {Object[]} genresAndIdsObj - array of objects.\n   * @param {number} genresAndIdsObj[].id id\n   * @param {string} genresAndIdsObj[].name - contain genre's name decoded with id\n   *\n   * @returns {string} string that contains all genres combined together and separated with comma: 'genre-1, genre-2'.\n   */\n  static idsToGenres(ids) {\n    if (!ids) return '';\n    return ids\n      .reduce((acc, id) => {\n        const genre = this.#findGenreByID(id);\n\n        return genre ? (acc += `${genre}, `) : acc;\n      }, '')\n      .slice(0, -2);\n  }\n\n  static #findGenreByID(idToFind) {\n    const foundedName = BackendConfigStorage.genresAndIDs?.find(\n      ({ id }) => id === idToFind\n    )?.name;\n\n    return foundedName;\n  }\n}\n","import { TMDBAPI } from './TMDBAPI.js';\nimport { readFromLocalStorage } from '../utils/WebStorageMethods.js';\n\nexport class BackendConfigStorage {\n  static #tmdbAPI = new TMDBAPI();\n\n  static #PATH_TO_POSTER_SS_KEY = 'PP-KEY';\n  static #GENRES_DATA_LS_KEY = 'genres-data';\n  static #GET_MODE = {\n    PATH: 'path',\n    GENRES_IDS: 'gi',\n  };\n  static #genresAndIDs = null;\n  static #pathToPoster = null;\n\n  constructor() {}\n\n  static async init() {\n    const POSTER_SS_KEY = this.#PATH_TO_POSTER_SS_KEY;\n    const GENRES_DATA_LS_KEY = this.#GENRES_DATA_LS_KEY;\n    const FETCH_MODES = this.#GET_MODE;\n    let pathToPoster = this.#pathToPoster;\n    let genresAndIDs = this.#genresAndIDs;\n\n    //try to get data from storage\n    pathToPoster ??= sessionStorage.getItem(POSTER_SS_KEY);\n    genresAndIDs ??= readFromLocalStorage(GENRES_DATA_LS_KEY);\n\n    //try get data from backend\n    if (!pathToPoster) {\n      pathToPoster = await this.#getDataFromBackend(FETCH_MODES.PATH);\n      //save path to SS\n      sessionStorage.setItem(POSTER_SS_KEY, pathToPoster);\n    }\n    if (!genresAndIDs) {\n      genresAndIDs = await this.#getDataFromBackend(FETCH_MODES.GENRES_IDS);\n      //save ids to LS\n      localStorage.setItem(GENRES_DATA_LS_KEY, JSON.stringify(genresAndIDs));\n    }\n    this.#pathToPoster = pathToPoster;\n    this.#genresAndIDs = genresAndIDs;\n  }\n\n  static get genresAndIDs() {\n    return this.#genresAndIDs;\n  }\n\n  static get pathToPoster() {\n    return this.#pathToPoster;\n  }\n\n  static async #getDataFromBackend(mode) {\n    let res = null;\n\n    try {\n      //get from backend\n      res =\n        mode === this.#GET_MODE.PATH\n          ? (await this.#tmdbAPI.getConfiguration()).images.secure_base_url\n          : (await this.#tmdbAPI.getGenresData()).genres;\n    } catch (error) {\n      console.log(error.message);\n    }\n\n    return res;\n  }\n}\n","export class TMDBAPI {\n  #API_KEY = 'a7cdca3ac9a73d688c9dec2c3c2e067b';\n  #BASE_URL = 'https://api.themoviedb.org/3';\n\n  #FETCH_MODES = {\n    TOP: 'TOP',\n    NAME: 'NAME',\n  };\n\n  #moviesByNameQueryOptions = {\n    URL: `${this.#BASE_URL}/search/movie`,\n    includeAdult: false,\n    name: '',\n    page: 1,\n  };\n\n  #topMoviesQueryOptions = {\n    URL: `${this.#BASE_URL}/trending/all`,\n    timeWindow: 'week',\n    page: 1,\n  };\n\n  constructor() {}\n\n  async getConfiguration() {\n    const query = `${this.#BASE_URL}/configuration?api_key=${this.#API_KEY}`;\n\n    return await this.#fetchByQuery(query);\n  }\n\n  async getGenresData() {\n    let fetchedGenres = [];\n    // prettier-ignore\n    let query = `${this.#BASE_URL}/genre/movie/list?api_key=${this.#API_KEY}&language=en-US`;\n\n    fetchedGenres = (await this.#fetchByQuery(query)).genres;\n    // prettier-ignore\n    query = `${this.#BASE_URL}/genre/tv/list?api_key=${this.#API_KEY}&language=en-US`;\n    fetchedGenres = {\n      genres: [...fetchedGenres, ...(await this.#fetchByQuery(query)).genres],\n    };\n\n    return fetchedGenres;\n  }\n\n  async getMoviesByName(searchName) {\n    if (searchName) {\n      this.#moviesByNameQueryOptions.name = searchName;\n      this.#moviesByNameQueryOptions.page = 1;\n    }\n\n    const response = await this.#fetchMovies(this.#FETCH_MODES.NAME);\n\n    return response;\n  }\n\n  async getMoviesByNameFromPage(pageNumber) {\n    this.#moviesByNameQueryOptions.page = pageNumber;\n\n    return await this.getMoviesByName('');\n  }\n\n  async getTopMovies() {\n    this.#moviesByNameQueryOptions.name = '';\n    const response = await this.#fetchMovies(this.#FETCH_MODES.TOP);\n\n    return response;\n  }\n\n  async getTopMoviesFromPage(pageNumber) {\n    this.#topMoviesQueryOptions.page = pageNumber;\n\n    return await this.getTopMovies();\n  }\n\n  async #fetchMovies(mode) {\n    const byNameOptions = this.#moviesByNameQueryOptions;\n    const byTopOptions = this.#topMoviesQueryOptions;\n\n    // prettier-ignore\n    const query =\n      mode === this.#FETCH_MODES.TOP\n        ? `${byTopOptions.URL}/${byTopOptions.timeWindow}?api_key=${this.#API_KEY}&page=${byTopOptions.page}`\n        : `${byNameOptions.URL}?api_key=${this.#API_KEY}&page=${byNameOptions.page}&query=${byNameOptions.name}\n          &include_adult=${byNameOptions.includeAdult}`;\n\n    return await this.#fetchByQuery(query);\n  }\n\n  async #fetchByQuery(query) {\n    const response = await fetch(query);\n\n    if (response.status === 200) {\n      return response.json();\n    } else {\n      throw new Error(response.statusText);\n    }\n  }\n\n  get currentPageByName() {\n    return this.#moviesByNameQueryOptions.page;\n  }\n\n  get currentPageByTop() {\n    return this.#topMoviesQueryOptions.page;\n  }\n\n  get lastSearchedName() {\n    return this.#moviesByNameQueryOptions.name;\n  }\n}\n","export function readFromLocalStorage(key) {\n  const item = localStorage.getItem(key);\n\n  return parseJson(item);\n}\n\nexport function readFromSessionStorage(key) {\n  const item = sessionStorage.getItem(key);\n\n  return parseJson(item);\n}\n\nfunction parseJson(json) {\n  try {\n    return JSON.parse(json);\n  } catch (error) {\n    return null;\n  }\n}\n","export class Spinner {\n  #rootEl = null;\n  #selfDOMEl = null;\n  #innerSpinnerEl = null;\n  #selfCSSClass = null;\n  #rootElPrevPositionStyleValue = null;\n  #HIDE_DELAY = 250; //ms\n\n  static POSITION_MODE = {\n    FLEX_CENTRED: 'f-c',\n    STICKY_CENTRED: 's-c',\n  };\n  #positionMode = null;\n\n  constructor(\n    rootElementSelector,\n    spinnerClassToCreate,\n    positioningMode = Spinner.POSITION_MODE.STICKY_CENTRED\n  ) {\n    this.#rootEl = document.querySelector(rootElementSelector);\n    this.#selfCSSClass = spinnerClassToCreate;\n    this.#positionMode = positioningMode;\n\n    this.#render();\n    this.#selfDOMEl = document.querySelector(`.${spinnerClassToCreate}`);\n    this.#innerSpinnerEl = document.querySelector(\n      `.${spinnerClassToCreate} .loader__spinner`\n    );\n    this.hide();\n  }\n\n  show() {\n    //centring element vertically\n    const deltaFromRootElTop = window.innerHeight / 2;\n    this.setDeltaY(deltaFromRootElTop);\n\n    this.#rootElPrevPositionStyleValue = this.#rootEl.style.position;\n    this.#rootEl.style.position = 'relative';\n    this.#selfDOMEl.style.display = 'flex';\n    this.#selfDOMEl.style.opacity = 1;\n  }\n\n  hide() {\n    this.#selfDOMEl.style.opacity = 0;\n    setTimeout(() => {\n      this.#selfDOMEl.style.display = 'none';\n      this.#rootEl.style.position = this.#rootElPrevPositionStyleValue;\n    }, this.#HIDE_DELAY);\n  }\n\n  //method for positioning the spinner along the Y axis according to root el\n  setDeltaY(delta) {\n    //this.#selfDOMEl.style.paddingTop = `${delta}px`;\n    this.#innerSpinnerEl.style.top = `${delta}px`;\n  }\n\n  #render() {\n    // prettier-ignore\n    const markup = `<div class=\"${this.#selfCSSClass}\"\n        style=\"\n          position: absolute; \n          top: 0px; \n          left: 0px;\n          z-index: 2;\n          display: flex; \n          justify-content: center;\n          ${this.#positionMode === Spinner.POSITION_MODE.FLEX_CENTRED ? \"align-items: center;\" : ''}\n          width: 100%;\n          height: 100%; \n          transition: opacity ${this.#HIDE_DELAY}ms ease-in-out;\n          background-color: var(--bg-color);\n          \">\n        <div class=\"loader__spinner\" \n          style=\"\n            ${this.#positionMode === Spinner.POSITION_MODE.FLEX_CENTRED ? \"\" : 'position: sticky;'}\n        \">\n        </div>\n      </div>`;\n\n    this.#rootEl.insertAdjacentHTML('beforeend', markup);\n  }\n}\n","import { readFromLocalStorage } from './WebStorageMethods';\n\nexport class LDStorageAPI {\n  static MOVIE_INFO = {\n    WATCHED: 'watched',\n    QUEUED: 'queued',\n    SEARCHED: 'searched',\n  };\n\n  static lastSearchRequest = null;\n\n  static #paginationInfo = {\n    page: 1,\n    totalPages: null,\n    MOVIES_PER_PAGE: 18,\n  };\n\n  static #activeStorage = null;\n  static #activeStorageMode = null;\n  static #isInLibrary = null;\n  static #watched = {};\n  static #queued = {};\n  static #searched = [];\n\n  static init(isInLibraryMode = false) {\n    this.#watched = readFromLocalStorage(this.MOVIE_INFO.WATCHED) ?? {};\n    this.#queued = readFromLocalStorage(this.MOVIE_INFO.QUEUED) ?? {};\n\n    this.#isInLibrary = isInLibraryMode;\n    if (isInLibraryMode) {\n      this.#activeStorageMode = this.MOVIE_INFO.WATCHED;\n      this.#activeStorage = [...Object.values(this.#watched)];\n      this.#paginationInfo.totalPages = this.#countTotalPages();\n    }\n  }\n\n  static getTotalPages() {\n    this.#paginationInfo.totalPages = this.#countTotalPages();\n\n    return this.#paginationInfo.totalPages;\n  }\n\n  static getMoviesByPage(pageNumber) {\n    this.#paginationInfo.page = pageNumber;\n\n    const moviesData = this.#sliceMoviesArrayByPage();\n\n    return moviesData;\n  }\n\n  static updateActiveStorage(storageType = '') {\n    if (!storageType) storageType = this.#activeStorageMode;\n\n    this.#activeStorageMode = storageType;\n    switch (storageType) {\n      case this.MOVIE_INFO.QUEUED:\n        this.#activeStorage = [...Object.values(this.#queued)];\n        break;\n      case this.MOVIE_INFO.WATCHED:\n        this.#activeStorage = [...Object.values(this.#watched)];\n        break;\n      case this.MOVIE_INFO.SEARCHED:\n        this.#activeStorage = this.#searched;\n        break;\n    }\n  }\n\n  static searchMoviesByName(searchRequest, searchIn) {\n    if (!this.#activeStorage) return;\n\n    const moviesData = [\n      ...Object.values(\n        searchIn === this.MOVIE_INFO.WATCHED ? this.#watched : this.#queued\n      ),\n    ];\n\n    const filteredMoviesData = moviesData.filter(movieObj => {\n      let movieName = movieObj.title ? movieObj.title : movieObj.name;\n      return movieName.toLowerCase().includes(searchRequest.toLowerCase());\n    });\n\n    this.lastSearchRequest = searchRequest;\n    this.#searched = filteredMoviesData;\n    this.updateActiveStorage();\n    return filteredMoviesData;\n  }\n\n  /**\n   * adding movie data to local storage\n   * @param {Object} obj - an object (for disct)\n   * @param {number} obj.id - id of obj of movie data we need to add\n   * @param {Object} obj.movieData - the obj of movie data\n   * @param {string} obj.storageKey - the key (where to safe (watched/ queued))\n   */\n\n  static addToLocalStorage({ id, movieData, storageKey } = {}) {\n    const writeToLS = this.#writeObjToLS;\n\n    try {\n      if (storageKey === this.MOVIE_INFO.WATCHED) {\n        this.#watched['' + id] = movieData;\n        writeToLS(storageKey, this.#watched);\n      } else if (storageKey === this.MOVIE_INFO.QUEUED) {\n        this.#queued['' + id] = movieData;\n        writeToLS(storageKey, this.#queued);\n      }\n    } catch (error) {\n      console.log(error.message);\n    }\n    if (this.#isInLibrary) this.updateActiveStorage();\n  }\n\n  /**\n   * removing movie from local storage\n   * @param {number} id - id of obj of movie data we need to remove\n   * @param {string} storageKey - the key (where data was saved (watched/ queued))\n   */\n\n  static removeFromLocalStorage(id, storageKey) {\n    const writeToLS = this.#writeObjToLS;\n\n    if (storageKey === this.MOVIE_INFO.WATCHED) {\n      delete this.#watched['' + id];\n      writeToLS(storageKey, this.#watched);\n    } else if (storageKey === this.MOVIE_INFO.QUEUED) {\n      delete this.#queued['' + id];\n      writeToLS(storageKey, this.#queued);\n    }\n    if (this.#isInLibrary) this.updateActiveStorage();\n  }\n\n  /**\n   * Shows if we have the movie in local storage\n   * @param {number} id  id of obj of movie we need to find\n   * @returns {Object} object of information about storing the film\n   */\n\n  static findInLocalStorage(id) {\n    const movInf = {\n      watched: !!this.#watched['' + id],\n      queued: !!this.#queued['' + id],\n    };\n\n    return movInf;\n  }\n\n  static #sliceMoviesArrayByPage() {\n    let fromMovie =\n      (this.#paginationInfo.page - 1) * this.#paginationInfo.MOVIES_PER_PAGE;\n    let toMovie =\n      this.#paginationInfo.page * this.#paginationInfo.MOVIES_PER_PAGE;\n\n    return this.#activeStorage.slice(fromMovie, toMovie);\n  }\n\n  static #countTotalPages() {\n    const moviesQuantity = this.#activeStorage.length;\n    const paginationPagesQuantity =\n      moviesQuantity / this.#paginationInfo.MOVIES_PER_PAGE;\n\n    return Math.ceil(paginationPagesQuantity);\n  }\n\n  static #writeObjToLS(key, obj) {\n    const toAdd = JSON.stringify(obj);\n\n    localStorage.setItem(key, toAdd);\n  }\n}\n","class PaginationAPI {\n  static #MOBILE_MAX_WIDTH = 767;\n  static #MOBILE_MIN_WIDTH = 479;\n  static #firstPageMarkup = `<li class=\"pagination__item\" id=\"pagination-number-1\"><button class=\"pagination__btn\" data-pagination=\"number\">1</button></li>`;\n  static #dotsLeftMarkup = `<li class=\"pagination__item pagination__item-dots\" id=\"pagination-dots-left\">&#183;&#183;&#183;</li>`;\n  static #dotsRightMarkup = `<li class=\"pagination__item pagination__item-dots\" id=\"pagination-dots-right\">&#183;&#183;&#183;</li>`;\n  static #scrollBtn = document.getElementById('js-scroll');\n\n  static #totalMarkup = '';\n\n  static currentPage = 1;\n  static totalPages = null;\n\n  static paginationWrapperDiv = document.getElementById('pagination-wrapper');\n  static paginationPagesList = document.getElementById('pagination-pages');\n  static paginationNextBtn = document.getElementById('pagination-button-next');\n  static paginationPreviousBtn = document.getElementById(\n    'pagination-button-previous'\n  );\n\n  static changePageByOne(isIncrementing) {\n    const deltaPage = isIncrementing ? 1 : -1;\n    this.currentPage += deltaPage;\n  }\n\n  static updateCurrentPage(newCurrentPage) {\n    this.currentPage = newCurrentPage;\n  }\n\n  static renderPagination() {\n    this.#renderPaginationMarkup();\n    this.paginationPagesList.innerHTML = this.#totalMarkup;\n    this.#afterRendering();\n  }\n\n  static onWindowResize() {\n    PaginationAPI.renderPagination();\n  }\n\n  static #renderPaginationMarkup() {\n    this.#totalMarkup = '';\n\n    if (!this.totalPages) {\n      this.paginationWrapperDiv.setAttribute('style', 'display: none');\n    } else {\n      this.paginationWrapperDiv.removeAttribute('style');\n    }\n\n    // if our active page is the last one of the whole pagination, then we disable it.\n    // otherwise, we enable it.\n    if (this.currentPage === this.totalPages) {\n      this.paginationNextBtn.disabled = true;\n      this.paginationPreviousBtn.disabled = false;\n    } else {\n      this.paginationPreviousBtn.disabled = false;\n    }\n\n    // if our active page is equal to 1, then we disable our previous value button of pagination.\n    // otherwise we show the next button\n    if (this.currentPage === 1) {\n      this.paginationPreviousBtn.disabled = true;\n      this.paginationNextBtn.disabled = false;\n    } else if (this.currentPage !== this.totalPages) {\n      this.paginationNextBtn.disabled = false;\n    }\n\n    // if our total pages value is 1, then we need to hide buttons, but if we update our total pages value, we need to the pagination buttons again in the pagination bar\n    if (this.totalPages === 1) {\n      this.paginationNextBtn.classList.add('pagination__btn--hidden');\n      this.paginationPreviousBtn.classList.add('pagination__btn--hidden');\n      this.#totalMarkup += this.#firstPageMarkup;\n      return;\n    } else {\n      this.paginationNextBtn.classList.remove('pagination__btn--hidden');\n      this.paginationPreviousBtn.classList.remove('pagination__btn--hidden');\n    }\n\n    if (window.innerWidth <= this.#MOBILE_MIN_WIDTH) {\n      this.#createSmallMobileMarkup();\n      return;\n    }\n\n    if (window.innerWidth <= this.#MOBILE_MAX_WIDTH) {\n      this.#createMobileMarkup();\n      return;\n    }\n\n    if (this.totalPages <= 7) {\n      this.#totalMarkup += this.#firstPageMarkup;\n      for (let i = 2; i <= this.totalPages - 1; i++) {\n        this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n      }\n      this.#totalMarkup += this.#getLastPageMarkup();\n      return;\n    }\n\n    // If our active page is less or equal than 5,\n    // then we create mark up with 5 first elements in the pagination bar\n    if (this.currentPage <= 4) {\n      this.#createStartingMarkup();\n      return;\n    }\n\n    if (this.currentPage === 5) {\n      this.#createMiddleActivePagesMarkup();\n      return;\n    }\n\n    // if our active page is equal to the last five elements of total pagination pages,\n    // then we create markup for the last five elements of the pagination bar\n    if (this.totalPages - 3 <= this.currentPage && !(this.currentPage <= 5)) {\n      this.#createEndingMarkup();\n      return;\n    }\n\n    if (this.currentPage === this.totalPages - 4) {\n      this.#createMiddleActivePagesMarkup();\n      return;\n    }\n\n    // if our active page is in the middle of pagination (after 5 and before the last five elements),\n    // then we create markup of 5 elements with the active in the middle\n    if (this.currentPage >= 6 && this.currentPage <= this.totalPages - 4) {\n      this.#createMiddleActivePagesMarkup();\n      return;\n    }\n  }\n\n  static #createStartingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n\n    const maxRenderPagesNum = this.totalPages >= 6 ? 5 : this.totalPages;\n\n    for (let i = 2; i <= maxRenderPagesNum; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n\n    if (this.totalPages >= 6) {\n      this.#totalMarkup += this.#dotsRightMarkup;\n      this.#totalMarkup += this.#getLastPageMarkup();\n    }\n  }\n\n  static #createMiddleActivePagesMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n\n    if (this.currentPage === 5 && this.currentPage + 2 >= this.totalPages) {\n      const maxRenderPagesNum =\n        this.currentPage + 1 >= this.totalPages\n          ? this.currentPage\n          : this.currentPage - 1;\n\n      for (let i = this.currentPage - 2; i <= maxRenderPagesNum; i++) {\n        this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n      }\n\n      return;\n    }\n\n    for (let i = this.currentPage - 2; i <= this.currentPage + 2; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n\n    this.#totalMarkup += this.#dotsRightMarkup;\n    this.#totalMarkup += this.#getLastPageMarkup();\n  }\n\n  static #createEndingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n\n    for (let i = this.totalPages - 4; i <= this.totalPages; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n  }\n\n  static #createMobileMarkup() {\n    if (this.totalPages <= 4) {\n      this.#totalMarkup += this.#firstPageMarkup;\n\n      for (let i = 2; i <= this.totalPages; i++) {\n        this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n      }\n      return;\n    }\n\n    if (this.currentPage <= 2) {\n      this.#createMobileStartingMarkup();\n      return;\n    }\n\n    if (this.currentPage === 3) {\n      this.#createMobileMiddleActivePageMarkup();\n      return;\n    }\n\n    if (this.totalPages - 1 <= this.currentPage && !(this.currentPage <= 3)) {\n      this.#createMobileEndingMarkup();\n      return;\n    }\n\n    if (this.currentPage === this.totalPages - 2) {\n      this.#createMobileMiddleActivePageMarkup();\n      return;\n    }\n\n    if (this.currentPage >= 4 && this.currentPage <= this.totalPages - 2) {\n      this.#createMobileMiddleActivePageMarkup();\n      return;\n    }\n  }\n\n  static #createMobileStartingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n\n    const maxRenderPagesNum = this.totalPages >= 4 ? 3 : this.totalPages;\n\n    for (let i = 2; i <= maxRenderPagesNum; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n\n    if (this.totalPages >= 4) {\n      this.#totalMarkup += this.#dotsRightMarkup;\n      this.#totalMarkup += this.#getLastPageMarkup();\n    }\n  }\n\n  static #createMobileMiddleActivePageMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n    this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(this.currentPage);\n    this.#totalMarkup += this.#dotsRightMarkup;\n    this.#totalMarkup += this.#getLastPageMarkup();\n  }\n\n  static #createMobileEndingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n\n    for (let i = this.totalPages - 2; i <= this.totalPages; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n  }\n\n  static #createSmallMobileMarkup() {\n    if (this.totalPages <= 3) {\n      this.#totalMarkup += this.#firstPageMarkup;\n\n      for (let i = 2; i <= this.totalPages; i++) {\n        this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n      }\n      return;\n    }\n\n    if (this.currentPage <= 2) {\n      this.#createSmallMobileStartingMarkup();\n      return;\n    }\n\n    if (this.totalPages - 1 <= this.currentPage && !(this.currentPage <= 2)) {\n      this.#createSmallMobileEndingMarkup();\n      return;\n    }\n\n    if (this.currentPage >= 3 && this.currentPage <= this.totalPages - 2) {\n      this.#createMobileMiddleActivePageMarkup();\n      return;\n    }\n  }\n\n  static #createSmallMobileStartingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n\n    const maxRenderPagesNum = this.totalPages >= 3 ? 2 : this.totalPages;\n\n    for (let i = 2; i <= maxRenderPagesNum; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n\n    if (this.totalPages >= 3) {\n      this.#totalMarkup += this.#dotsRightMarkup;\n      this.#totalMarkup += this.#getLastPageMarkup();\n    }\n  }\n\n  static #createSmallMobileEndingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n\n    for (let i = this.totalPages - 1; i <= this.totalPages; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n  }\n\n  static #afterRendering() {\n    this.#activateCurrentPageBtn();\n    this.#correctPaginationBarSize();\n  }\n\n  static #activateCurrentPageBtn() {\n    const activePageItem = document.getElementById(\n      `pagination-number-${this.currentPage}`\n    );\n    const activePageBtn = activePageItem.firstElementChild;\n    activePageBtn.classList.add('pagination__btn--active');\n  }\n\n  static #correctPaginationBarSize() {\n    // Scroll adjustment when we have a less than 4 pages in total\n    if (this.totalPages <= 4) {\n      this.#scrollBtn.classList.remove('scroll--absolute');\n    } else {\n      this.#scrollBtn.classList.add('scroll--absolute');\n    }\n\n    // For better experience, we lock the size of the bar if we have a lot of pages. So it is comfortable to switch between the pages by pressing the arrows buttons.\n    if (this.totalPages >= 8) {\n      this.paginationPagesList.classList.add('pagination__list--width-L');\n    } else {\n      this.paginationPagesList.classList.remove('pagination__list--width-L');\n    }\n  }\n\n  static #getPageBtnMarkupWithIdInsered(id) {\n    return `<li class=\"pagination__item\" id=\"pagination-number-${id}\"><button class=\"pagination__btn\" data-pagination=\"number\">${id}</button></li>`;\n  }\n\n  static #getLastPageMarkup() {\n    return `<li class=\"pagination__item\" id=\"pagination-number-${this.totalPages}\"><button class=\"pagination__btn\" data-pagination=\"number\">${this.totalPages}</button></li>`;\n  }\n}\n\nexport { PaginationAPI };\n","export class NotificationAPI {\n  static #NOTIFICATION_HIDE_DELAY = 10000;\n  static #DELETE_NOTIFICATION_EL_DELAY = 250;\n  static #numberOfMessages = 0;\n  static #notifTimeoutsIds = {};\n\n  static #notificationListEl;\n\n  static {\n    this.#notificationListEl = null;\n  }\n\n  constructor() {}\n\n  static init(rootElSelector, deltaYFromTop = 150) {\n    //adding root el for messages\n    const markup = `<ul class=\"notif-list\" id='notif-list-root'></ul>`;\n    document\n      .querySelector(rootElSelector)\n      .insertAdjacentHTML('afterbegin', markup);\n    document.querySelector('#notif-list-root').style.top = `${deltaYFromTop}px`;\n\n    this.#notificationListEl = document.querySelector('.notif-list');\n    this.#notificationListEl.addEventListener(\n      'click',\n      this.#onNotificationClick\n    );\n  }\n\n  static #onNotificationClick = e => {\n    if (e.target.nodeName !== 'P') return;\n\n    this.clearNotification(e.target.dataset.notifId);\n  };\n\n  static addNotification = (\n    text = '',\n    isAlert = false,\n    visibleDuration = null\n  ) => {\n    if (this.#numberOfMessages > 100) this.#numberOfMessages = 0;\n    this.#numberOfMessages++;\n\n    visibleDuration ??= this.#NOTIFICATION_HIDE_DELAY;\n    //render markup\n    const id = this.#numberOfMessages;\n    // prettier-ignore\n    const markup = `\n    <li class=\"notif-list__item\">\n      <p class=\"\n          notif-list__text\n          ${isAlert ? 'notif-list__text--alert' : ''}\n          notif-list__text--is-visible\" \n        data-notif-id=${id}>\n        ${text}\n      </p>\n    </li>\n    `;\n    this.#notificationListEl.insertAdjacentHTML('beforeend', markup);\n\n    //hide notification after timeout\n    this.#notifTimeoutsIds['' + id] = setTimeout(() => {\n      this.clearNotification(id);\n    }, visibleDuration);\n\n    return id;\n  };\n\n  static clearNotification = id => {\n    if (!this.#notifTimeoutsIds['' + id]) return;\n\n    clearInterval(this.#notifTimeoutsIds['' + id]);\n    delete this.#notifTimeoutsIds['' + id];\n\n    const notificationEl = document.querySelector(`p[data-notif-id=\"${id}\"]`);\n    notificationEl.classList.remove('notif-list__text--is-visible');\n    //completely remove notification message el from DOM\n    setTimeout(() => {\n      notificationEl.closest('li').remove();\n    }, this.#DELETE_NOTIFICATION_EL_DELAY);\n  };\n}\n","import { IDsParser } from '../utils/IDsToGenresParser.js';\nimport { BackendConfigStorage } from '../libs/BackendConfigStorage';\nimport { LDStorageAPI } from '../utils/LibraryDataStorageAPI.js';\nimport { Spinner } from '../components/Spinner';\n\nexport class MovieModalHandler {\n  #modalWindowEls = {\n    closeBtn: document.querySelector('.modal-close'),\n    queueBtn: document.querySelector('#queue-btn'),\n    watchedBtn: document.querySelector('#watched-btn'),\n    moviesNavBtnsWrapper: document.querySelector('#movies-nav-btns-wrapper'),\n    prevMovieBtn: document.querySelector('#prev-movie-btn'),\n    nextMovieBtn: document.querySelector('#next-movie-btn'),\n    modalBackdrop: document.querySelector('#movies-modal-window'),\n    libActionsBtnsWrapper: document.querySelector(\n      '#movie-modal-buttons-wrapper'\n    ),\n    posterImgEl: document.querySelector('#poster'),\n  };\n\n  #movieLibData = null;\n  #movieId = null;\n  #clickedMovieData = null;\n  #galleryAPI = null;\n  #spinner = null;\n\n  #nextMovieId = null;\n  #prevMovieId = null;\n\n  static MODE = {\n    HOME: 'home',\n    LIBRARY_WATCHED: 'lib-watch',\n    LIBRARY_QUEUED: 'lib-queue',\n  };\n  mode = null;\n\n  static MOVIE_ACTIONS = {\n    ADDED_TO_WATCHED: 'add_wchd',\n    REMOVED_FROM_WATCHED: 'rem_wchd',\n    ADDED_TO_QUEUED: 'add_queue',\n    REMOVED_FROM_QUEUED: 'rem_queue',\n  };\n\n  #onMoveStatusChangedCB = null;\n\n  constructor(galleryAPI, mode, onMoveStatusChangedCB) {\n    this.#galleryAPI = galleryAPI;\n    this.mode = mode;\n    this.#onMoveStatusChangedCB = onMoveStatusChangedCB;\n    this.#spinner = new Spinner(\n      '.modal-poster',\n      'loader-movie-modal',\n      Spinner.POSITION_MODE.FLEX_CENTRED\n    );\n\n    this.#modalWindowEls.libActionsBtnsWrapper.addEventListener(\n      'click',\n      this.#onLibraryButtonsClick\n    );\n\n    //removes display: none from element, which comes with html\n    this.#modalWindowEls.modalBackdrop.removeAttribute('style');\n  }\n\n  /**\n   *\n   * @param {number} movieId\n   */\n  onGalleryCardClicked = movieId => {\n    // this.#spinner.show();\n\n    //listener bindings\n    window.addEventListener('keydown', this.#onEscKeyPress);\n    this.#modalWindowEls.modalBackdrop.addEventListener(\n      'click',\n      this.#onBackdropClick\n    );\n    this.#modalWindowEls.closeBtn.addEventListener('click', this.#closeModal);\n    this.#modalWindowEls.moviesNavBtnsWrapper.addEventListener(\n      'click',\n      this.#onNavThroughMoviesBtnClick\n    );\n    //cut body content by viewport sizes to prevent from scrolling\n    document.body.classList.add('js-modal-is-hidden');\n\n    this.#movieId = movieId;\n    this.#setMovieData();\n\n    this.#renderModal(this.#clickedMovieData);\n    const { posterImgEl } = this.#modalWindowEls;\n    posterImgEl.addEventListener('load', this.#onPosterLoaded);\n    posterImgEl.addEventListener('error', this.#onPosterLoaded);\n  };\n\n  #setMovieData(movieCardLink = null) {\n    movieCardLink ??= document.querySelector(\n      `a[data-movie-id=\"${this.#movieId}\"]`\n    );\n\n    this.#prevMovieId = movieCardLink.dataset.prevMovieId;\n    this.#nextMovieId = movieCardLink.dataset.nextMovieId;\n    this.#movieLibData = LDStorageAPI.findInLocalStorage(this.#movieId);\n    this.#clickedMovieData = this.#getMovieDataByID(this.#movieId);\n  }\n\n  #renderModal(movieData) {\n    const {\n      genre_ids: genreIDs,\n      original_title: movieTitle,\n      name: movieName,\n      poster_path: pathToPoster,\n      vote_average: vote,\n      vote_count: votes,\n      popularity,\n      overview,\n    } = movieData;\n\n    const fixedAverageRating = vote ? vote.toFixed(1) : 'N/D';\n    const fixedPopularity = popularity ? popularity.toFixed(1) : 'N/D';\n    const movieGenresString = IDsParser.idsToGenres(genreIDs);\n    const posterFullPath =\n      BackendConfigStorage.pathToPoster + 'w500' + pathToPoster;\n\n    const refs = {\n      moviePoster: document.getElementById('poster'),\n      modalTitle: document.getElementById('modalTitle'),\n      movieAverageRating: document.getElementById('averageRating'),\n      movieRating: document.getElementById('rating'),\n      moviePopularity: document.getElementById('popularity'),\n      movieTitle: document.getElementById('title'),\n      movieGenre: document.getElementById('genre'),\n      movieAbout: document.getElementById('aboutMovie'),\n    };\n\n    if (pathToPoster) refs.moviePoster.src = `${posterFullPath}`;\n    refs.modalTitle.textContent = `${movieTitle ?? movieName}`;\n    refs.movieAverageRating.textContent = `${fixedAverageRating}`;\n    refs.movieRating.textContent = `${votes ? votes : 'N/D'}`;\n    refs.moviePopularity.textContent = `${fixedPopularity}`;\n    refs.movieTitle.textContent = `${movieTitle ?? movieName}`;\n    refs.movieGenre.textContent = `${\n      movieGenresString ? movieGenresString : 'N/D'\n    }`;\n    refs.movieAbout.textContent = `${overview ? overview : 'Sorry, no data'}`;\n\n    //placeholder logic\n    const modalPosterPlaceholder = document.getElementById('modal-placeholder');\n    const textInPlaceholder = document.querySelector(\n      '.modal-poster__placeholder-title'\n    );\n    const { posterImgEl } = this.#modalWindowEls;\n\n    if (!pathToPoster) {\n      modalPosterPlaceholder.classList.remove('is-hidden');\n      textInPlaceholder.textContent = `${movieTitle ?? movieName}`;\n      posterImgEl.classList.add('is-hidden');\n    } else {\n      modalPosterPlaceholder.classList.add('is-hidden');\n      posterImgEl.classList.remove('is-hidden');\n    }\n\n    //if there is image for poster - show spinner, else - hide it in case we going from image to placeholder\n    pathToPoster ? this.#spinner.show() : this.#spinner.hide();\n\n    //update text in library-related buttons according to movie's persistance in a library\n    this.#updateControlButtons(this.#movieLibData);\n    this.#updateMoviesNavButtons();\n\n    //show whole modal window\n    this.#modalWindowEls.modalBackdrop.classList.remove('is-hidden');\n  }\n\n  #updateControlButtons({ watched, queued }) {\n    this.#modalWindowEls.watchedBtn.textContent = `\n  ${watched ? 'REMOVE FROM' : 'ADD TO'} WATCHED`;\n    this.#modalWindowEls.queueBtn.textContent = `\n  ${queued ? 'REMOVE FROM' : 'ADD TO'} QUEUE`;\n  }\n\n  #updateMoviesNavButtons() {\n    this.#prevMovieId\n      ? this.#modalWindowEls.prevMovieBtn.removeAttribute('disabled')\n      : this.#modalWindowEls.prevMovieBtn.setAttribute('disabled', '');\n    this.#nextMovieId\n      ? this.#modalWindowEls.nextMovieBtn.removeAttribute('disabled')\n      : this.#modalWindowEls.nextMovieBtn.setAttribute('disabled', '');\n  }\n\n  #onLibraryButtonsClick = e => {\n    const oldMovieLibData = this.#movieLibData;\n    const movieNewLibData = this.#updateLSData(e.target.id);\n\n    const movieLibDelta = {\n      watchedChanged: oldMovieLibData.watched !== movieNewLibData.watched,\n      queuedChanged: oldMovieLibData.queued === movieNewLibData.queued,\n    };\n    let movieAction;\n    if (movieLibDelta.watchedChanged) {\n      movieAction = oldMovieLibData.watched\n        ? MovieModalHandler.MOVIE_ACTIONS.REMOVED_FROM_WATCHED\n        : MovieModalHandler.MOVIE_ACTIONS.ADDED_TO_WATCHED;\n    } else {\n      movieAction = oldMovieLibData.queued\n        ? MovieModalHandler.MOVIE_ACTIONS.REMOVED_FROM_QUEUED\n        : MovieModalHandler.MOVIE_ACTIONS.ADDED_TO_QUEUED;\n    }\n\n    this.#updateControlButtons(movieNewLibData);\n    this.#movieLibData = movieNewLibData;\n\n    this.#onMoveStatusChangedCB?.(movieAction);\n  };\n\n  #updateLSData(btnID) {\n    const movieNewLibData = {\n      ...LDStorageAPI.findInLocalStorage(this.#movieId),\n    };\n\n    if (btnID === 'queue-btn') {\n      movieNewLibData.queued\n        ? LDStorageAPI.removeFromLocalStorage(\n            this.#movieId,\n            LDStorageAPI.MOVIE_INFO.QUEUED\n          )\n        : LDStorageAPI.addToLocalStorage({\n            id: this.#movieId,\n            movieData: this.#clickedMovieData,\n            storageKey: LDStorageAPI.MOVIE_INFO.QUEUED,\n          });\n      movieNewLibData.queued = !movieNewLibData.queued;\n    } else {\n      movieNewLibData.watched\n        ? LDStorageAPI.removeFromLocalStorage(\n            this.#movieId,\n            LDStorageAPI.MOVIE_INFO.WATCHED\n          )\n        : LDStorageAPI.addToLocalStorage({\n            id: this.#movieId,\n            movieData: this.#clickedMovieData,\n            storageKey: LDStorageAPI.MOVIE_INFO.WATCHED,\n          });\n      movieNewLibData.watched = !movieNewLibData.watched;\n    }\n\n    return movieNewLibData;\n  }\n\n  #closeModal = () => {\n    const { posterImgEl } = this.#modalWindowEls;\n    this.#spinner.hide();\n\n    window.removeEventListener('keydown', this.#onEscKeyPress);\n    this.#modalWindowEls.modalBackdrop.removeEventListener(\n      'click',\n      this.#onBackdropClick\n    );\n    posterImgEl.removeEventListener('load', this.#onPosterLoaded);\n    posterImgEl.removeEventListener('error', this.#onPosterLoaded);\n\n    //hide whole modal\n    this.#modalWindowEls.modalBackdrop.classList.add('is-hidden');\n    //let body content scroll freely\n    document.body.classList.remove('js-modal-is-hidden');\n  };\n\n  #onBackdropClick = event => {\n    if (event.target === this.#modalWindowEls.modalBackdrop) {\n      this.#closeModal();\n    }\n  };\n\n  #onPosterLoaded = e => {\n    this.#spinner.hide();\n  };\n\n  #onNavThroughMoviesBtnClick = e => {\n    if (e.target.nodeName !== 'BUTTON') return;\n\n    const nextMovieId =\n      e.target.id === 'prev-movie-btn' ? this.#prevMovieId : this.#nextMovieId;\n    if (!nextMovieId) {\n      return;\n    }\n\n    this.#movieId = nextMovieId;\n    this.#setMovieData();\n    this.#updateMoviesNavButtons();\n    this.#renderModal(this.#clickedMovieData);\n  };\n\n  #onEscKeyPress = event => {\n    let nextMovieId = null;\n    let switchMovie = false;\n\n    switch (event.code) {\n      case 'Escape':\n        this.#closeModal();\n        break;\n      case 'ArrowLeft':\n        nextMovieId = this.#prevMovieId;\n        switchMovie = true;\n        break;\n      case 'ArrowRight':\n        nextMovieId = this.#nextMovieId;\n        switchMovie = true;\n        break;\n    }\n\n    //render next/previous movie data\n    if (switchMovie && nextMovieId) {\n      this.#movieId = nextMovieId;\n      this.#setMovieData();\n      this.#updateMoviesNavButtons();\n      this.#renderModal(this.#clickedMovieData);\n    }\n  };\n\n  #getMovieDataByID(ID) {\n    const moviesData = this.#galleryAPI.currentRenderedMoviesData;\n\n    return moviesData.find(({ id }) => id === +ID);\n  }\n}\n","const refs = {\n  openModalLink: document.querySelector('#open-team-modal'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  modal: document.querySelector('[data-modal]'),\n};\n\nlet isShow = false;\n\n//MAIN\n(() => {\n  refs.openModalLink.addEventListener('click', onOpenModalLinkClick);\n  refs.closeModalBtn.addEventListener('click', toggleModal);\n  refs.modal.addEventListener('click', onBackdropClick);\n  refs.modal.removeAttribute('style');\n})();\n\nfunction onOpenModalLinkClick(event) {\n  event.preventDefault();\n\n  toggleModal();\n}\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n  document.body.classList.toggle('js-modal-is-hidden');\n  isShow\n    ? document.body.removeEventListener('keydown', onKeyDown)\n    : document.body.addEventListener('keydown', onKeyDown);\n  isShow = !isShow;\n}\n\nfunction onBackdropClick(event) {\n  if (event.target != event.currentTarget) {\n    return;\n  }\n  toggleModal();\n}\n\nfunction onKeyDown(event) {\n  event.code === 'Escape' ? toggleModal() : null;\n}\n","const scrollBtn = document.getElementById('js-scroll');\nscrollBtn.addEventListener('click', () => window.scroll(0, 0));\nwindow.addEventListener('scroll', onScrollClick);\n\nfunction onScrollClick(e) {\n  e.preventDefault();\n  if (window.scrollY < 320) {\n    scrollBtn.classList.remove('scroll--isShown');\n  } else {\n    scrollBtn.classList.add('scroll--isShown');\n  }\n}\n","const switchButton = document.querySelector('#theme-button');\nswitchButton.onclick = toggleTheme;\n\ngetTheme();\n\nfunction getTheme() {\n  const theme = localStorage.getItem('theme');\n  theme && setTheme(theme);\n  if (theme === 'dark')\n    switchButton.classList.toggle('theme-button--dark-mode');\n}\n\nfunction setTheme(theme) {\n  document.documentElement.className = theme;\n  localStorage.setItem('theme', theme);\n}\n\nfunction toggleTheme() {\n  const theme = document.documentElement.classList.contains('dark')\n    ? 'light'\n    : 'dark';\n  switchButton.classList.toggle('theme-button--dark-mode');\n  setTheme(theme);\n}\n"],"names":["$c46539db76e83076$var$_loadedImages","WeakMap","$c46539db76e83076$var$_totalImages","$c46539db76e83076$var$_pathToPoster","$c46539db76e83076$var$_rootEl","$c46539db76e83076$var$_onCriticalImagesLoadedCallbacks","$c46539db76e83076$var$_onDeleteButtonClickedCB","$c46539db76e83076$var$_onMovieCardClickedCB","$c46539db76e83076$var$_currentMoviesData","$c46539db76e83076$var$_spinner","$c46539db76e83076$var$_posterImageCSSClass","$c46539db76e83076$var$_renderCloseButton","$c46539db76e83076$var$_MAX_NUM_OF_CRIT_IMAGES","$c46539db76e83076$var$_NUMB_OF_IMAGES_TO_LOAD_AT_ONCE","$c46539db76e83076$var$_numberOfCriticalImages","$c46539db76e83076$var$_imagesElsToLoad","$c46539db76e83076$var$_onCardClicked","$c46539db76e83076$var$_createMovieCardMarkup","WeakSet","$c46539db76e83076$var$_parseIDsToGenresString","$c46539db76e83076$var$_onImageLoaded","$c46539db76e83076$var$_trackImagesLoadingEnd","$c46539db76e83076$var$_untrackImagesLoadingEnd","GalleryAPI","addOnCardClickCallback","cb","$c46539db76e83076$var$_classPrivateFieldGet","this","addEventListener","removeOnCardClickCallback","removeEventListener","addOnCriticalImagesLoadedCallback","push","removeOnCriticalImagesLoadedCallback","$c46539db76e83076$var$_classPrivateFieldSet","filter","existCallback","renderMoviesCards","moviesData","show","window","matchMedia","matches","imgsWithPoster","isAllCriticalAdded","$c46539db76e83076$var$_classPrivateMethodGet","$c46539db76e83076$var$_untrackImagesLoadingEnd2","call","cardsMarkup","reduce","acc","movieData","indx","arr","markup","hasPoster","$c46539db76e83076$var$_createMovieCardMarkup2","id","innerHTML","$c46539db76e83076$var$_trackImagesLoadingEnd2","document","querySelectorAll","hide","currentRenderedMoviesData","constructor","rootElementSelector","renderCloseButton","onMovieCardClickedCB","onDeleteButtonClickedCB","$c46539db76e83076$var$_classPrivateMethodInitSpec","$c46539db76e83076$var$_classPrivateFieldInitSpec","writable","value","e","movieCardLink","target","closest","clickedElNodeName","nodeName","preventDefault","movieId","dataset","Promise","resolve","_this$loadedImages","currentImageEl","getAttribute","numbOfImgsToLoadAtOnce","numberOfCriticalImages","ref","counter","length","imageToLoadEl","shift","imgToLoadThumbEl","pathToPoster","src","removeAttribute","classList","remove","forEach","currImgThumbEl","type","setTimeout","complete","add","querySelector","BackendConfigStorage","Spinner","poster_path","title","name","genre_ids","vote_average","release_date","first_air_date","prevMovieID","nextMovieID","canBeCritical","ref2","releaseDate","slice","rating","Number","toFixed","genresStr","$c46539db76e83076$var$_parseIDsToGenresString2","movieName","mustBeCritical","posterEl","IDs","isTooManyIDs","ids","parsedGenres","IDsParser","idsToGenres","el","allImagesEls","static","genre","$8c43936ff8b59f16$var$_classStaticPrivateMethodGet","$8c43936ff8b59f16$var$_findGenreByID","idToFind","ref1","genresAndIDs","find","POSTER_SS_KEY","$38faf1db58baa15d$var$_classStaticPrivateFieldSpecGet","$38faf1db58baa15d$var$_PATH_TO_POSTER_SS_KEY","GENRES_DATA_LS_KEY","$38faf1db58baa15d$var$_GENRES_DATA_LS_KEY","FETCH_MODES","$38faf1db58baa15d$var$_GET_MODE","$38faf1db58baa15d$var$_pathToPoster","$38faf1db58baa15d$var$_genresAndIDs","sessionStorage","getItem","readFromLocalStorage","$38faf1db58baa15d$var$_classStaticPrivateMethodGet","$38faf1db58baa15d$var$_getDataFromBackend","PATH","setItem","GENRES_IDS","localStorage","JSON","stringify","$38faf1db58baa15d$var$_classStaticPrivateFieldSpecSet","async","mode","res","$38faf1db58baa15d$var$_tmdbAPI","getConfiguration","images","secure_base_url","getGenresData","genres","error","console","log","message","TMDBAPI","query","$e5f173a880c6421c$var$_classPrivateFieldGet","$e5f173a880c6421c$var$_BASE_URL","$e5f173a880c6421c$var$_API_KEY","$e5f173a880c6421c$var$_classPrivateMethodGet","$e5f173a880c6421c$var$_fetchByQuery","$e5f173a880c6421c$var$_fetchByQuery2","fetchedGenres","searchName","$e5f173a880c6421c$var$_moviesByNameQueryOptions","page","$e5f173a880c6421c$var$_fetchMovies","$e5f173a880c6421c$var$_fetchMovies2","$e5f173a880c6421c$var$_FETCH_MODES","NAME","pageNumber","getMoviesByName","TOP","$e5f173a880c6421c$var$_topMoviesQueryOptions","getTopMovies","currentPageByName","currentPageByTop","lastSearchedName","$e5f173a880c6421c$var$_classPrivateMethodInitSpec","$e5f173a880c6421c$var$_classPrivateFieldInitSpec","URL","includeAdult","timeWindow","byNameOptions","byTopOptions","response","fetch","status","json","Error","statusText","key","parseJson","parse","deltaFromRootElTop","innerHeight","setDeltaY","$df1e3e47c33de587$var$_classPrivateFieldSet","$df1e3e47c33de587$var$_rootElPrevPositionStyleValue","$df1e3e47c33de587$var$_classPrivateFieldGet","$df1e3e47c33de587$var$_rootEl","style","position","$df1e3e47c33de587$var$_selfDOMEl","display","opacity","$df1e3e47c33de587$var$_HIDE_DELAY","delta","$df1e3e47c33de587$var$_innerSpinnerEl","top","spinnerClassToCreate","positioningMode","POSITION_MODE","STICKY_CENTRED","$df1e3e47c33de587$var$_render","$df1e3e47c33de587$var$_classPrivateFieldInitSpec","$df1e3e47c33de587$var$_selfCSSClass","$df1e3e47c33de587$var$_positionMode","$df1e3e47c33de587$var$_classPrivateMethodGet","$df1e3e47c33de587$var$_render2","FLEX_CENTRED","insertAdjacentHTML","LDStorageAPI","isInLibraryMode","$43c3a821cb748c31$var$_classStaticPrivateFieldSpecSet","$43c3a821cb748c31$var$_watched","MOVIE_INFO","WATCHED","$43c3a821cb748c31$var$_queued","QUEUED","$43c3a821cb748c31$var$_isInLibrary","$43c3a821cb748c31$var$_activeStorageMode","$43c3a821cb748c31$var$_activeStorage","Object","values","$43c3a821cb748c31$var$_classStaticPrivateFieldSpecGet","$43c3a821cb748c31$var$_paginationInfo","totalPages","$43c3a821cb748c31$var$_classStaticPrivateMethodGet","$43c3a821cb748c31$var$_countTotalPages","$43c3a821cb748c31$var$_sliceMoviesArrayByPage","storageType","SEARCHED","$43c3a821cb748c31$var$_searched","searchRequest","searchIn","filteredMoviesData","movieObj","toLowerCase","includes","lastSearchRequest","updateActiveStorage","storageKey","writeToLS","$43c3a821cb748c31$var$_writeObjToLS","watched","queued","fromMovie","MOVIES_PER_PAGE","toMovie","paginationPagesQuantity","Math","ceil","obj","toAdd","$43c3a821cb748c31$var$_defineProperty","PaginationAPI","isIncrementing","deltaPage","currentPage","newCurrentPage","$35063f71c217bb28$var$_classStaticPrivateMethodGet","$35063f71c217bb28$var$_renderPaginationMarkup","paginationPagesList","$35063f71c217bb28$var$_classStaticPrivateFieldSpecGet","$35063f71c217bb28$var$_totalMarkup","$35063f71c217bb28$var$_afterRendering","renderPagination","$35063f71c217bb28$var$_classStaticPrivateFieldSpecSet","paginationWrapperDiv","setAttribute","paginationNextBtn","disabled","paginationPreviousBtn","$35063f71c217bb28$var$_firstPageMarkup","innerWidth","$35063f71c217bb28$var$_MOBILE_MIN_WIDTH","$35063f71c217bb28$var$_createSmallMobileMarkup","$35063f71c217bb28$var$_MOBILE_MAX_WIDTH","$35063f71c217bb28$var$_createMobileMarkup","i","$35063f71c217bb28$var$_getPageBtnMarkupWithIdInsered","$35063f71c217bb28$var$_getLastPageMarkup","$35063f71c217bb28$var$_createStartingMarkup","$35063f71c217bb28$var$_createMiddleActivePagesMarkup","$35063f71c217bb28$var$_createEndingMarkup","maxRenderPagesNum","$35063f71c217bb28$var$_dotsRightMarkup","$35063f71c217bb28$var$_dotsLeftMarkup","$35063f71c217bb28$var$_createMobileStartingMarkup","$35063f71c217bb28$var$_createMobileMiddleActivePageMarkup","$35063f71c217bb28$var$_createMobileEndingMarkup","$35063f71c217bb28$var$_createSmallMobileStartingMarkup","$35063f71c217bb28$var$_createSmallMobileEndingMarkup","$35063f71c217bb28$var$_activateCurrentPageBtn","$35063f71c217bb28$var$_correctPaginationBarSize","getElementById","firstElementChild","$35063f71c217bb28$var$_scrollBtn","$35063f71c217bb28$var$_defineProperty","NotificationAPI","rootElSelector","deltaYFromTop","$b9050273993c9dad$var$_classStaticPrivateFieldSpecSet","$b9050273993c9dad$var$_notificationListEl","$b9050273993c9dad$var$_classStaticPrivateFieldSpecGet","$b9050273993c9dad$var$_onNotificationClick","$b9050273993c9dad$var$_NOTIFICATION_HIDE_DELAY","$b9050273993c9dad$var$_DELETE_NOTIFICATION_EL_DELAY","$b9050273993c9dad$var$_numberOfMessages","$b9050273993c9dad$var$_notifTimeoutsIds","clearNotification","notifId","$b9050273993c9dad$var$_defineProperty","text","isAlert","visibleDuration","_this$numberOfMessage","clearInterval","notificationEl","$7b66772e61328029$var$_modalWindowEls","$7b66772e61328029$var$_movieLibData","$7b66772e61328029$var$_movieId","$7b66772e61328029$var$_clickedMovieData","$7b66772e61328029$var$_galleryAPI","$7b66772e61328029$var$_spinner","$7b66772e61328029$var$_nextMovieId","$7b66772e61328029$var$_prevMovieId","$7b66772e61328029$var$_onMoveStatusChangedCB","$7b66772e61328029$var$_setMovieData","$7b66772e61328029$var$_renderModal","$7b66772e61328029$var$_updateControlButtons","$7b66772e61328029$var$_updateMoviesNavButtons","$7b66772e61328029$var$_onLibraryButtonsClick","$7b66772e61328029$var$_updateLSData","$7b66772e61328029$var$_closeModal","$7b66772e61328029$var$_onBackdropClick","$7b66772e61328029$var$_onPosterLoaded","$7b66772e61328029$var$_onNavThroughMoviesBtnClick","$7b66772e61328029$var$_onEscKeyPress","$7b66772e61328029$var$_getMovieDataByID","MovieModalHandler","galleryAPI","onMoveStatusChangedCB","$7b66772e61328029$var$_classPrivateMethodInitSpec","$7b66772e61328029$var$_classPrivateFieldInitSpec","closeBtn","queueBtn","watchedBtn","moviesNavBtnsWrapper","prevMovieBtn","nextMovieBtn","modalBackdrop","libActionsBtnsWrapper","posterImgEl","$7b66772e61328029$var$_defineProperty","$7b66772e61328029$var$_classPrivateFieldGet","body","$7b66772e61328029$var$_classPrivateFieldSet","$7b66772e61328029$var$_classPrivateMethodGet","$7b66772e61328029$var$_setMovieData2","$7b66772e61328029$var$_renderModal2","oldMovieLibData","movieNewLibData","$7b66772e61328029$var$_updateLSData2","movieLibDelta","movieAction","MOVIE_ACTIONS","REMOVED_FROM_WATCHED","ADDED_TO_WATCHED","REMOVED_FROM_QUEUED","ADDED_TO_QUEUED","$7b66772e61328029$var$_updateControlButtons2","event","nextMovieId","$7b66772e61328029$var$_updateMoviesNavButtons2","switchMovie","code","prevMovieId","findInLocalStorage","$7b66772e61328029$var$_getMovieDataByID2","genreIDs","original_title","movieTitle","vote","vote_count","votes","popularity","overview","fixedAverageRating","fixedPopularity","movieGenresString","posterFullPath","refs","moviePoster","modalTitle","movieAverageRating","movieRating","moviePopularity","movieGenre","movieAbout","textContent","modalPosterPlaceholder","textInPlaceholder","btnID","removeFromLocalStorage","addToLocalStorage","ID","HOME","LIBRARY_WATCHED","LIBRARY_QUEUED","openModalLink","closeModalBtn","modal","isShow","onOpenModalLinkClick","toggleModal","toggle","onKeyDown","onBackdropClick","currentTarget","scrollBtn","scroll","scrollY","switchButton","setTheme","theme","documentElement","className","onclick","contains","getTheme"],"version":3,"file":"index.2196258b.js.map"}