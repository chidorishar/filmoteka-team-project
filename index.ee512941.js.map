{"mappings":"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","sources":["src/js/components/GalleryAPI.js","src/js/utils/IDsToGenresParser.js","src/js/libs/BackendConfigStorage.js","src/js/libs/TMDBAPI.js","src/js/utils/WebStorageMethods.js","src/js/components/Spinner.js","src/js/utils/LibraryDataStorageAPI.js","src/js/components/PaginationAPI.js","src/js/components/NotificationAPI.js","src/js/components/MovieModalHandler.js","src/js/components/teamModalWindow.js","src/js/components/scroll.js","src/js/components/colorTheme.js"],"sourcesContent":["import { IDsParser } from '../utils/IDsToGenresParser';\nimport { BackendConfigStorage } from '../libs/BackendConfigStorage.js';\nimport { Spinner } from '../components/Spinner';\n\nexport class GalleryAPI {\n  #loadedImages = 0;\n  #totalImages = 0;\n  #pathToPoster = '';\n  #rootEl = null;\n  #onCriticalImagesLoadedCallbacks = [];\n  #onDeleteButtonClickedCB = null;\n  #onMovieCardClickedCB = null;\n  #currentMoviesData = null;\n  #spinner = null;\n  #posterImageCSSClass = 'movie-card__img';\n\n  #renderCloseButton = null;\n\n  #MAX_NUM_OF_CRIT_IMAGES = 3;\n  #NUMB_OF_IMAGES_TO_LOAD_AT_ONCE = 3;\n  #numberOfCriticalImages = null;\n  #imagesElsToLoad = null;\n\n  constructor(\n    rootElementSelector,\n    renderCloseButton = false,\n    onMovieCardClickedCB = () => {},\n    onDeleteButtonClickedCB = () => {}\n  ) {\n    this.#rootEl = document.querySelector(rootElementSelector);\n    this.#renderCloseButton = renderCloseButton;\n    this.#onMovieCardClickedCB = onMovieCardClickedCB;\n    this.#onDeleteButtonClickedCB = onDeleteButtonClickedCB;\n    this.#pathToPoster = BackendConfigStorage.pathToPoster;\n    this.#spinner = new Spinner('.gallery', 'loader-gallery');\n    this.#rootEl.addEventListener('click', this.#onCardClicked);\n  }\n\n  addOnCardClickCallback(cb) {\n    this.#rootEl.addEventListener('click', cb);\n  }\n\n  removeOnCardClickCallback(cb) {\n    this.#rootEl.removeEventListener('click', cb);\n  }\n\n  /**\n   * It routs click events\n   * @returns nothing\n   */\n  #onCardClicked = e => {\n    const movieCardLink = e.target.closest('a');\n    const clickedElNodeName = e.target.nodeName;\n    e.preventDefault();\n\n    if (!movieCardLink) {\n      return;\n    }\n\n    const movieId = movieCardLink.dataset.movieId;\n    //if we clicked remove button - call specific callback asynchronously and exit from function\n    if (clickedElNodeName === 'BUTTON') {\n      Promise.resolve(\n        (() => {\n          this.#onDeleteButtonClickedCB(movieId);\n        })()\n      );\n\n      return;\n    }\n\n    //we clicked to movie card - call specific callback asynchronously\n    Promise.resolve(\n      (() => {\n        this.#onMovieCardClickedCB(movieId);\n      })()\n    );\n  };\n\n  addOnCriticalImagesLoadedCallback(cb) {\n    this.#onCriticalImagesLoadedCallbacks.push(cb);\n  }\n\n  removeOnCriticalImagesLoadedCallback(cb) {\n    this.#onCriticalImagesLoadedCallbacks =\n      this.#onCriticalImagesLoadedCallbacks.filter(\n        existCallback => existCallback !== cb\n      );\n  }\n\n  renderMoviesCards(moviesData) {\n    this.#currentMoviesData = moviesData;\n\n    this.#spinner.show();\n\n    //set constants according to device\n    if (window.matchMedia('(max-width: 1280px)').matches)\n      this.#MAX_NUM_OF_CRIT_IMAGES = 2;\n    if (window.matchMedia('(max-width: 768px)').matches) {\n      this.#MAX_NUM_OF_CRIT_IMAGES = 1;\n      this.#NUMB_OF_IMAGES_TO_LOAD_AT_ONCE = 2;\n    }\n    //reset Gallery state\n    this.#numberOfCriticalImages = this.#MAX_NUM_OF_CRIT_IMAGES;\n    let imgsWithPoster = 0;\n    let isAllCriticalAdded = false;\n    this.#untrackImagesLoadingEnd();\n    //create markup\n    const cardsMarkup = moviesData.reduce((acc, movieData, indx, arr) => {\n      const { markup, hasPoster } = this.#createMovieCardMarkup(\n        movieData,\n        arr[indx - 1]?.id,\n        arr[indx + 1]?.id,\n        !isAllCriticalAdded\n      );\n\n      if (hasPoster) imgsWithPoster++;\n      if (\n        imgsWithPoster === this.#numberOfCriticalImages &&\n        !isAllCriticalAdded\n      )\n        isAllCriticalAdded = true;\n\n      return (acc += markup);\n    }, '');\n    //actual created images number is lesser than wanted tracked one, so must set it to real one\n    if (imgsWithPoster < this.#numberOfCriticalImages)\n      this.#numberOfCriticalImages = imgsWithPoster;\n    this.#totalImages = imgsWithPoster;\n\n    //render images to gallery\n    this.#rootEl.innerHTML = cardsMarkup;\n    //if there is posters with images then load them in batches (progressive) else hide spinner\n    if (imgsWithPoster) {\n      this.#trackImagesLoadingEnd();\n      this.#imagesElsToLoad = [\n        ...document.querySelectorAll(`.${this.#posterImageCSSClass}[data-src]`),\n      ];\n    } else this.#spinner.hide();\n  }\n\n  #createMovieCardMarkup(\n    {\n      poster_path,\n      title,\n      name,\n      genre_ids,\n      vote_average,\n      release_date,\n      first_air_date,\n      id,\n    },\n    prevMovieID,\n    nextMovieID,\n    canBeCritical\n  ) {\n    const releaseDate = (release_date ?? first_air_date)?.slice(0, 4) ?? '';\n    const rating = vote_average ? Number(vote_average).toFixed(1) : 'N/D';\n    let genresStr = this.#parseIDsToGenresString(genre_ids);\n    const movieName = title ?? name;\n    const hasPoster = !!poster_path;\n    const mustBeCritical = hasPoster && canBeCritical;\n\n    // prettier-ignore\n    const posterEl =\n      poster_path ? \n      `<img\n        class=\"${this.#posterImageCSSClass}\"\n        ${mustBeCritical\n          ?\n          `src=\"${this.#pathToPoster}w500${poster_path}\"` \n          : \n          `src=\"#\" data-src=\"${this.#pathToPoster}w500${poster_path}\"`\n          }\n        alt=\"Poster of the ${movieName} movie\"\n      />`\n      : \n      `<span class=\"movie-card__poster-placeholder\">\n        <span class=\"movie-card__placeholder-title-wrapper\">\n          <span class=\"movie-card__poster-placeholder--title\">\n           ${movieName}\n          </span>\n        </span>\n      has no poster\n      </span>`;\n    // prettier-ignore\n    const closeButtonEl = this.#renderCloseButton\n      ? `<button\n          aria-label=\"Delete movie from library\"\n          class=\"movie-card__delete-button\"\n          data-modal-close\n        >\n          <svg class=\"movie-card__icon\" viewBox=\"0 0 32 32\" width=\"10\" height=\"10\">\n            <path d=\"M31.439 3.166l-3.166-3.166-12.554 12.552-12.552-12.552-3.166 3.166 12.552 12.552-12.552 12.554 3.166 3.166 12.552-12.554 12.554 12.554 3.166-3.166-12.554-12.554 12.554-12.552z\"></path>          </svg>\n        </button>`\n      : '';\n\n    const imgThumbAdditionalClasses =\n      (hasPoster ? '' : 'movie-card__img-thumb--no-poster') +\n      ' ' +\n      (hasPoster && !mustBeCritical\n        ? 'movie-card__img-thumb--img-loading'\n        : '');\n\n    // prettier-ignore\n    const markup =\n      `<li class=\"movie-card\">\n        <a class=\"movie-card__link\" href=\"/\" data-movie-id=\"${id}\" \n          data-prev-movie-id=\"${prevMovieID ?? '' }\" data-next-movie-id=\"${ nextMovieID ?? '' }\">\n          <div class=\"movie-card__img-thumb ${imgThumbAdditionalClasses}\"\n            >\n            ${closeButtonEl}\n            ${posterEl}\n          </div>\n          <h3 class=\"movie-card__title\">${movieName}</h3>\n          <ul class=\"movie-card__movie-info-wrapper\">\n            <li class=\"movie-card__item movie-card__item--hidden-overflow\">\n              <p class=\"movie-card__genres\">${genresStr}</p>\n            </li>\n            <li class=\"movie-card__item\">\n              <p class=\"movie-card__release-date\">${genresStr ? '&nbsp;|&nbsp' : \"\"}${releaseDate}</p>\n            </li>\n            <li class=\"movie-card__item movie-card__item--accent\">\n              <p class=\"movie-card__rating\">${rating}</p>\n            </li>\n          </ul>\n        </a>\n      </li>`;\n\n    return { markup, hasPoster };\n  }\n\n  #parseIDsToGenresString(IDs) {\n    if (!IDs?.length) return '';\n\n    const isTooManyIDs = IDs.length > 2;\n    const ids = isTooManyIDs ? IDs.slice(0, 2) : IDs;\n\n    let parsedGenres = IDsParser.idsToGenres(ids);\n    parsedGenres += isTooManyIDs ? ', Other' : '';\n\n    return parsedGenres;\n  }\n\n  #onImageLoaded = e => {\n    const currentImageEl = e.target;\n\n    //accept events only from images with correct \"src\" attribute value\n    if (currentImageEl.getAttribute('src') === '#') return;\n\n    this.#loadedImages++;\n    const numbOfImgsToLoadAtOnce = this.#NUMB_OF_IMAGES_TO_LOAD_AT_ONCE;\n    const numberOfCriticalImages = this.#numberOfCriticalImages;\n    currentImageEl.removeEventListener('load', this.#onImageLoaded);\n    //load next bunch of images if there any or it's a last bunch of images\n    //it just works\n    if (\n      !(this.#loadedImages < numberOfCriticalImages) &&\n      (this.#loadedImages === numberOfCriticalImages ||\n        !(\n          (this.#loadedImages - numberOfCriticalImages) %\n          numbOfImgsToLoadAtOnce\n        ) ||\n        this.#totalImages - this.#loadedImages < numbOfImgsToLoadAtOnce)\n    ) {\n      let counter = 0;\n      while (\n        counter < numbOfImgsToLoadAtOnce &&\n        this.#imagesElsToLoad?.length\n      ) {\n        const imageToLoadEl = this.#imagesElsToLoad.shift();\n        const imgToLoadThumbEl = imageToLoadEl.closest(\n          '.movie-card__img-thumb'\n        );\n        const pathToPoster = imageToLoadEl.dataset.src;\n        imageToLoadEl.removeAttribute('data-src');\n        imageToLoadEl.src = pathToPoster;\n        //remove placeholder, which showed while image loading\n        imgToLoadThumbEl.classList.remove('movie-card__img-thumb--img-loading');\n        counter++;\n      }\n    }\n\n    if (this.#loadedImages === numberOfCriticalImages && this.#totalImages) {\n      this.#spinner.hide();\n      this.#onCriticalImagesLoadedCallbacks.forEach(cb => cb());\n    }\n\n    //image loading failed, show fallback instead\n    const currImgThumbEl = currentImageEl.closest('.movie-card__img-thumb');\n    if (e.type === 'error') {\n      //it checks for image loaded flag after some timeout, because sometimes we get events with \"error\" type for loaded images\n      setTimeout(() => {\n        if (!currentImageEl.complete)\n          currImgThumbEl?.classList.add('movie-card__img-thumb--img-fallback');\n      }, 250);\n    }\n  };\n  //12\n  #trackImagesLoadingEnd() {\n    const allImagesEls = document.querySelectorAll(\n      `.${this.#posterImageCSSClass}`\n    );\n\n    [...allImagesEls].forEach(el => {\n      el.addEventListener('load', this.#onImageLoaded);\n      el.addEventListener('error', this.#onImageLoaded);\n    });\n  }\n\n  #untrackImagesLoadingEnd() {\n    const allImagesEls = document.querySelectorAll(\n      `.${this.#posterImageCSSClass}`\n    );\n\n    this.#loadedImages = 0;\n    [...allImagesEls].forEach(el => {\n      el.removeEventListener('load', this.#onImageLoaded);\n      el.removeEventListener('error', this.#onImageLoaded);\n    });\n  }\n\n  get currentRenderedMoviesData() {\n    return this.#currentMoviesData;\n  }\n}\n","import { BackendConfigStorage } from '../libs/BackendConfigStorage.js';\n\nexport class IDsParser {\n  constructor() {}\n\n  /**\n   *Function that takes array with IDs and return string, that contain all genres corresponding to passed IDs\n   * @param {string []} ids - array that contains IDs in string format.\n   * @param {Object[]} genresAndIdsObj - array of objects.\n   * @param {number} genresAndIdsObj[].id id\n   * @param {string} genresAndIdsObj[].name - contain genre's name decoded with id\n   *\n   * @returns {string} string that contains all genres combined together and separated with comma: 'genre-1, genre-2'.\n   */\n  static idsToGenres(ids) {\n    if (!ids) return '';\n    return ids\n      .reduce((acc, id) => {\n        const genre = this.#findGenreByID(id);\n\n        return genre ? (acc += `${genre}, `) : acc;\n      }, '')\n      .slice(0, -2);\n  }\n\n  static #findGenreByID(idToFind) {\n    const foundedName = BackendConfigStorage.genresAndIDs?.find(\n      ({ id }) => id === idToFind\n    )?.name;\n\n    return foundedName;\n  }\n}\n","import { TMDBAPI } from './TMDBAPI.js';\nimport { readFromLocalStorage } from '../utils/WebStorageMethods.js';\n\nexport class BackendConfigStorage {\n  static #tmdbAPI = new TMDBAPI();\n\n  static #PATH_TO_POSTER_SS_KEY = 'PP-KEY';\n  static #GENRES_DATA_LS_KEY = 'genres-data';\n  static #GET_MODE = {\n    PATH: 'path',\n    GENRES_IDS: 'gi',\n  };\n  static #genresAndIDs = null;\n  static #pathToPoster = null;\n\n  constructor() {}\n\n  static async init() {\n    const POSTER_SS_KEY = this.#PATH_TO_POSTER_SS_KEY;\n    const GENRES_DATA_LS_KEY = this.#GENRES_DATA_LS_KEY;\n    const FETCH_MODES = this.#GET_MODE;\n    let pathToPoster = this.#pathToPoster;\n    let genresAndIDs = this.#genresAndIDs;\n\n    //try to get data from storage\n    pathToPoster ??= sessionStorage.getItem(POSTER_SS_KEY);\n    genresAndIDs ??= readFromLocalStorage(GENRES_DATA_LS_KEY);\n\n    //try get data from backend\n    if (!pathToPoster) {\n      pathToPoster = await this.#getDataFromBackend(FETCH_MODES.PATH);\n      //save path to SS\n      sessionStorage.setItem(POSTER_SS_KEY, pathToPoster);\n    }\n    if (!genresAndIDs) {\n      genresAndIDs = await this.#getDataFromBackend(FETCH_MODES.GENRES_IDS);\n      //save ids to LS\n      localStorage.setItem(GENRES_DATA_LS_KEY, JSON.stringify(genresAndIDs));\n    }\n    this.#pathToPoster = pathToPoster;\n    this.#genresAndIDs = genresAndIDs;\n  }\n\n  static get genresAndIDs() {\n    return this.#genresAndIDs;\n  }\n\n  static get pathToPoster() {\n    return this.#pathToPoster;\n  }\n\n  static async #getDataFromBackend(mode) {\n    let res = null;\n\n    try {\n      //get from backend\n      res =\n        mode === this.#GET_MODE.PATH\n          ? (await this.#tmdbAPI.getConfiguration()).images.secure_base_url\n          : (await this.#tmdbAPI.getGenresData()).genres;\n    } catch (error) {\n      console.log(error.message);\n    }\n\n    return res;\n  }\n}\n","export class TMDBAPI {\n  #API_KEY = 'a7cdca3ac9a73d688c9dec2c3c2e067b';\n  #BASE_URL = 'https://api.themoviedb.org/3';\n\n  #FETCH_MODES = {\n    TOP: 'TOP',\n    NAME: 'NAME',\n  };\n\n  #moviesByNameQueryOptions = {\n    URL: `${this.#BASE_URL}/search/movie`,\n    includeAdult: false,\n    name: '',\n    page: 1,\n  };\n\n  #topMoviesQueryOptions = {\n    URL: `${this.#BASE_URL}/trending/all`,\n    timeWindow: 'week',\n    page: 1,\n  };\n\n  constructor() {}\n\n  async getConfiguration() {\n    const query = `${this.#BASE_URL}/configuration?api_key=${this.#API_KEY}`;\n\n    return await this.#fetchByQuery(query);\n  }\n\n  async getGenresData() {\n    let fetchedGenres = [];\n    // prettier-ignore\n    let query = `${this.#BASE_URL}/genre/movie/list?api_key=${this.#API_KEY}&language=en-US`;\n\n    fetchedGenres = (await this.#fetchByQuery(query)).genres;\n    // prettier-ignore\n    query = `${this.#BASE_URL}/genre/tv/list?api_key=${this.#API_KEY}&language=en-US`;\n    fetchedGenres = {\n      genres: [...fetchedGenres, ...(await this.#fetchByQuery(query)).genres],\n    };\n\n    return fetchedGenres;\n  }\n\n  async getMoviesByName(searchName) {\n    if (searchName) {\n      this.#moviesByNameQueryOptions.name = searchName;\n      this.#moviesByNameQueryOptions.page = 1;\n    }\n\n    const response = await this.#fetchMovies(this.#FETCH_MODES.NAME);\n\n    return response;\n  }\n\n  async getMoviesByNameFromPage(pageNumber) {\n    this.#moviesByNameQueryOptions.page = pageNumber;\n\n    return await this.getMoviesByName('');\n  }\n\n  async getTopMovies() {\n    this.#moviesByNameQueryOptions.name = '';\n    const response = await this.#fetchMovies(this.#FETCH_MODES.TOP);\n\n    return response;\n  }\n\n  async getTopMoviesFromPage(pageNumber) {\n    this.#topMoviesQueryOptions.page = pageNumber;\n\n    return await this.getTopMovies();\n  }\n\n  async #fetchMovies(mode) {\n    const byNameOptions = this.#moviesByNameQueryOptions;\n    const byTopOptions = this.#topMoviesQueryOptions;\n\n    // prettier-ignore\n    const query =\n      mode === this.#FETCH_MODES.TOP\n        ? `${byTopOptions.URL}/${byTopOptions.timeWindow}?api_key=${this.#API_KEY}&page=${byTopOptions.page}`\n        : `${byNameOptions.URL}?api_key=${this.#API_KEY}&page=${byNameOptions.page}&query=${byNameOptions.name}\n          &include_adult=${byNameOptions.includeAdult}`;\n\n    return await this.#fetchByQuery(query);\n  }\n\n  async #fetchByQuery(query) {\n    const response = await fetch(query);\n\n    if (response.status === 200) {\n      return response.json();\n    } else {\n      throw new Error(response.statusText);\n    }\n  }\n\n  get currentPageByName() {\n    return this.#moviesByNameQueryOptions.page;\n  }\n\n  get currentPageByTop() {\n    return this.#topMoviesQueryOptions.page;\n  }\n\n  get lastSearchedName() {\n    return this.#moviesByNameQueryOptions.name;\n  }\n}\n","export function readFromLocalStorage(key) {\n  const item = localStorage.getItem(key);\n\n  return parseJson(item);\n}\n\nexport function readFromSessionStorage(key) {\n  const item = sessionStorage.getItem(key);\n\n  return parseJson(item);\n}\n\nfunction parseJson(json) {\n  try {\n    return JSON.parse(json);\n  } catch (error) {\n    return null;\n  }\n}\n","export class Spinner {\n  #rootEl = null;\n  #selfDOMEl = null;\n  #innerSpinnerEl = null;\n  #selfCSSClass = null;\n  #rootElPrevPositionStyleValue = null;\n  #HIDE_DELAY = 250; //ms\n\n  static POSITION_MODE = {\n    FLEX_CENTRED: 'f-c',\n    STICKY_CENTRED: 's-c',\n  };\n  #positionMode = null;\n\n  constructor(\n    rootElementSelector,\n    spinnerClassToCreate,\n    positioningMode = Spinner.POSITION_MODE.STICKY_CENTRED\n  ) {\n    this.#rootEl = document.querySelector(rootElementSelector);\n    this.#selfCSSClass = spinnerClassToCreate;\n    this.#positionMode = positioningMode;\n\n    this.#render();\n    this.#selfDOMEl = document.querySelector(`.${spinnerClassToCreate}`);\n    this.#innerSpinnerEl = document.querySelector(\n      `.${spinnerClassToCreate} .loader__spinner`\n    );\n    this.hide();\n  }\n\n  show() {\n    //centring element vertically\n    const deltaFromRootElTop = window.innerHeight / 2;\n    this.setDeltaY(deltaFromRootElTop);\n\n    this.#rootElPrevPositionStyleValue = this.#rootEl.style.position;\n    this.#rootEl.style.position = 'relative';\n    this.#selfDOMEl.style.display = 'flex';\n    this.#selfDOMEl.style.opacity = 1;\n  }\n\n  hide() {\n    this.#selfDOMEl.style.opacity = 0;\n    setTimeout(() => {\n      this.#selfDOMEl.style.display = 'none';\n      this.#rootEl.style.position = this.#rootElPrevPositionStyleValue;\n    }, this.#HIDE_DELAY);\n  }\n\n  //method for positioning the spinner along the Y axis according to root el\n  setDeltaY(delta) {\n    //this.#selfDOMEl.style.paddingTop = `${delta}px`;\n    this.#innerSpinnerEl.style.top = `${delta}px`;\n  }\n\n  #render() {\n    // prettier-ignore\n    const markup = `<div class=\"${this.#selfCSSClass}\"\n        style=\"\n          position: absolute; \n          top: 0px; \n          left: 0px;\n          z-index: 2;\n          display: flex; \n          justify-content: center;\n          ${this.#positionMode === Spinner.POSITION_MODE.FLEX_CENTRED ? \"align-items: center;\" : ''}\n          width: 100%;\n          height: 100%; \n          transition: opacity ${this.#HIDE_DELAY}ms ease-in-out;\n          background-color: var(--bg-color);\n          \">\n        <div class=\"loader__spinner\" \n          style=\"\n            ${this.#positionMode === Spinner.POSITION_MODE.FLEX_CENTRED ? \"\" : 'position: sticky;'}\n        \">\n        </div>\n      </div>`;\n\n    this.#rootEl.insertAdjacentHTML('beforeend', markup);\n  }\n}\n","import { readFromLocalStorage } from './WebStorageMethods';\n\nexport class LDStorageAPI {\n  static MOVIE_INFO = {\n    WATCHED: 'watched',\n    QUEUED: 'queued',\n    SEARCHED: 'searched',\n  };\n\n  static lastSearchRequest = null;\n\n  static #paginationInfo = {\n    page: 1,\n    totalPages: null,\n    MOVIES_PER_PAGE: 18,\n  };\n\n  static #activeStorage = null;\n  static #activeStorageMode = null;\n  static #isInLibrary = null;\n  static #watched = {};\n  static #queued = {};\n  static #searched = [];\n\n  static init(isInLibraryMode = false) {\n    this.#watched = readFromLocalStorage(this.MOVIE_INFO.WATCHED) ?? {};\n    this.#queued = readFromLocalStorage(this.MOVIE_INFO.QUEUED) ?? {};\n\n    this.#isInLibrary = isInLibraryMode;\n    if (isInLibraryMode) {\n      this.#activeStorageMode = this.MOVIE_INFO.WATCHED;\n      this.#activeStorage = [...Object.values(this.#watched)];\n      this.#paginationInfo.totalPages = this.#countTotalPages();\n    }\n  }\n\n  static getTotalPages() {\n    this.#paginationInfo.totalPages = this.#countTotalPages();\n\n    return this.#paginationInfo.totalPages;\n  }\n\n  static getMoviesByPage(pageNumber) {\n    this.#paginationInfo.page = pageNumber;\n\n    const moviesData = this.#sliceMoviesArrayByPage();\n\n    return moviesData;\n  }\n\n  static updateActiveStorage(storageType = '') {\n    if (!storageType) storageType = this.#activeStorageMode;\n\n    this.#activeStorageMode = storageType;\n    switch (storageType) {\n      case this.MOVIE_INFO.QUEUED:\n        this.#activeStorage = [...Object.values(this.#queued)];\n        break;\n      case this.MOVIE_INFO.WATCHED:\n        this.#activeStorage = [...Object.values(this.#watched)];\n        break;\n      case this.MOVIE_INFO.SEARCHED:\n        this.#activeStorage = this.#searched;\n        break;\n    }\n  }\n\n  static searchMoviesByName(searchRequest, searchIn) {\n    if (!this.#activeStorage) return;\n\n    const moviesData = [\n      ...Object.values(\n        searchIn === this.MOVIE_INFO.WATCHED ? this.#watched : this.#queued\n      ),\n    ];\n\n    const filteredMoviesData = moviesData.filter(movieObj => {\n      let movieName = movieObj.title ? movieObj.title : movieObj.name;\n      return movieName.toLowerCase().includes(searchRequest.toLowerCase());\n    });\n\n    this.lastSearchRequest = searchRequest;\n    this.#searched = filteredMoviesData;\n    this.updateActiveStorage();\n    return filteredMoviesData;\n  }\n\n  /**\n   * adding movie data to local storage\n   * @param {Object} obj - an object (for disct)\n   * @param {number} obj.id - id of obj of movie data we need to add\n   * @param {Object} obj.movieData - the obj of movie data\n   * @param {string} obj.storageKey - the key (where to safe (watched/ queued))\n   */\n\n  static addToLocalStorage({ id, movieData, storageKey } = {}) {\n    const writeToLS = this.#writeObjToLS;\n\n    try {\n      if (storageKey === this.MOVIE_INFO.WATCHED) {\n        this.#watched['' + id] = movieData;\n        writeToLS(storageKey, this.#watched);\n      } else if (storageKey === this.MOVIE_INFO.QUEUED) {\n        this.#queued['' + id] = movieData;\n        writeToLS(storageKey, this.#queued);\n      }\n    } catch (error) {\n      console.log(error.message);\n    }\n    if (this.#isInLibrary) this.updateActiveStorage();\n  }\n\n  /**\n   * removing movie from local storage\n   * @param {number} id - id of obj of movie data we need to remove\n   * @param {string} storageKey - the key (where data was saved (watched/ queued))\n   */\n\n  static removeFromLocalStorage(id, storageKey) {\n    const writeToLS = this.#writeObjToLS;\n\n    if (storageKey === this.MOVIE_INFO.WATCHED) {\n      delete this.#watched['' + id];\n      writeToLS(storageKey, this.#watched);\n    } else if (storageKey === this.MOVIE_INFO.QUEUED) {\n      delete this.#queued['' + id];\n      writeToLS(storageKey, this.#queued);\n    }\n    if (this.#isInLibrary) this.updateActiveStorage();\n  }\n\n  /**\n   * Shows if we have the movie in local storage\n   * @param {number} id  id of obj of movie we need to find\n   * @returns {Object} object of information about storing the film\n   */\n\n  static findInLocalStorage(id) {\n    const movInf = {\n      watched: !!this.#watched['' + id],\n      queued: !!this.#queued['' + id],\n    };\n\n    return movInf;\n  }\n\n  static #sliceMoviesArrayByPage() {\n    let fromMovie =\n      (this.#paginationInfo.page - 1) * this.#paginationInfo.MOVIES_PER_PAGE;\n    let toMovie =\n      this.#paginationInfo.page * this.#paginationInfo.MOVIES_PER_PAGE;\n\n    return this.#activeStorage.slice(fromMovie, toMovie);\n  }\n\n  static #countTotalPages() {\n    const moviesQuantity = this.#activeStorage.length;\n    const paginationPagesQuantity =\n      moviesQuantity / this.#paginationInfo.MOVIES_PER_PAGE;\n\n    return Math.ceil(paginationPagesQuantity);\n  }\n\n  static #writeObjToLS(key, obj) {\n    const toAdd = JSON.stringify(obj);\n\n    localStorage.setItem(key, toAdd);\n  }\n}\n","class PaginationAPI {\n  static #MOBILE_MAX_WIDTH = 767;\n  static #MOBILE_MIN_WIDTH = 479;\n  static #firstPageMarkup = `<li class=\"pagination__item\" id=\"pagination-number-1\"><button class=\"pagination__btn\" data-pagination=\"number\">1</button></li>`;\n  static #dotsLeftMarkup = `<li class=\"pagination__item pagination__item-dots\" id=\"pagination-dots-left\">&#183;&#183;&#183;</li>`;\n  static #dotsRightMarkup = `<li class=\"pagination__item pagination__item-dots\" id=\"pagination-dots-right\">&#183;&#183;&#183;</li>`;\n  static #scrollBtn = document.getElementById('js-scroll');\n\n  static #totalMarkup = '';\n\n  static currentPage = 1;\n  static totalPages = null;\n\n  static paginationWrapperDiv = document.getElementById('pagination-wrapper');\n  static paginationPagesList = document.getElementById('pagination-pages');\n  static paginationNextBtn = document.getElementById('pagination-button-next');\n  static paginationPreviousBtn = document.getElementById(\n    'pagination-button-previous'\n  );\n\n  static changePageByOne(isIncrementing) {\n    const deltaPage = isIncrementing ? 1 : -1;\n    this.currentPage += deltaPage;\n  }\n\n  static updateCurrentPage(newCurrentPage) {\n    this.currentPage = newCurrentPage;\n  }\n\n  static renderPagination() {\n    this.#renderPaginationMarkup();\n    this.paginationPagesList.innerHTML = this.#totalMarkup;\n    this.#afterRendering();\n  }\n\n  static onWindowResize() {\n    PaginationAPI.renderPagination();\n  }\n\n  static #renderPaginationMarkup() {\n    this.#totalMarkup = '';\n\n    if (!this.totalPages) {\n      this.paginationWrapperDiv.setAttribute('style', 'display: none');\n    } else {\n      this.paginationWrapperDiv.removeAttribute('style');\n    }\n\n    // if our active page is the last one of the whole pagination, then we disable it.\n    // otherwise, we enable it.\n    if (this.currentPage === this.totalPages) {\n      this.paginationNextBtn.disabled = true;\n      this.paginationPreviousBtn.disabled = false;\n    } else {\n      this.paginationPreviousBtn.disabled = false;\n    }\n\n    // if our active page is equal to 1, then we disable our previous value button of pagination.\n    // otherwise we show the next button\n    if (this.currentPage === 1) {\n      this.paginationPreviousBtn.disabled = true;\n      this.paginationNextBtn.disabled = false;\n    } else if (this.currentPage !== this.totalPages) {\n      this.paginationNextBtn.disabled = false;\n    }\n\n    // if our total pages value is 1, then we need to hide buttons, but if we update our total pages value, we need to the pagination buttons again in the pagination bar\n    if (this.totalPages === 1) {\n      this.paginationNextBtn.classList.add('pagination__btn--hidden');\n      this.paginationPreviousBtn.classList.add('pagination__btn--hidden');\n      this.#totalMarkup += this.#firstPageMarkup;\n      return;\n    } else {\n      this.paginationNextBtn.classList.remove('pagination__btn--hidden');\n      this.paginationPreviousBtn.classList.remove('pagination__btn--hidden');\n    }\n\n    if (window.innerWidth <= this.#MOBILE_MIN_WIDTH) {\n      this.#createSmallMobileMarkup();\n      return;\n    }\n\n    if (window.innerWidth <= this.#MOBILE_MAX_WIDTH) {\n      this.#createMobileMarkup();\n      return;\n    }\n\n    if (this.totalPages <= 7) {\n      this.#totalMarkup += this.#firstPageMarkup;\n      for (let i = 2; i <= this.totalPages - 1; i++) {\n        this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n      }\n      this.#totalMarkup += this.#getLastPageMarkup();\n      return;\n    }\n\n    // If our active page is less or equal than 5,\n    // then we create mark up with 5 first elements in the pagination bar\n    if (this.currentPage <= 4) {\n      this.#createStartingMarkup();\n      return;\n    }\n\n    if (this.currentPage === 5) {\n      this.#createMiddleActivePagesMarkup();\n      return;\n    }\n\n    // if our active page is equal to the last five elements of total pagination pages,\n    // then we create markup for the last five elements of the pagination bar\n    if (this.totalPages - 3 <= this.currentPage && !(this.currentPage <= 5)) {\n      this.#createEndingMarkup();\n      return;\n    }\n\n    if (this.currentPage === this.totalPages - 4) {\n      this.#createMiddleActivePagesMarkup();\n      return;\n    }\n\n    // if our active page is in the middle of pagination (after 5 and before the last five elements),\n    // then we create markup of 5 elements with the active in the middle\n    if (this.currentPage >= 6 && this.currentPage <= this.totalPages - 4) {\n      this.#createMiddleActivePagesMarkup();\n      return;\n    }\n  }\n\n  static #createStartingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n\n    const maxRenderPagesNum = this.totalPages >= 6 ? 5 : this.totalPages;\n\n    for (let i = 2; i <= maxRenderPagesNum; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n\n    if (this.totalPages >= 6) {\n      this.#totalMarkup += this.#dotsRightMarkup;\n      this.#totalMarkup += this.#getLastPageMarkup();\n    }\n  }\n\n  static #createMiddleActivePagesMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n\n    if (this.currentPage === 5 && this.currentPage + 2 >= this.totalPages) {\n      const maxRenderPagesNum =\n        this.currentPage + 1 >= this.totalPages\n          ? this.currentPage\n          : this.currentPage - 1;\n\n      for (let i = this.currentPage - 2; i <= maxRenderPagesNum; i++) {\n        this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n      }\n\n      return;\n    }\n\n    for (let i = this.currentPage - 2; i <= this.currentPage + 2; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n\n    this.#totalMarkup += this.#dotsRightMarkup;\n    this.#totalMarkup += this.#getLastPageMarkup();\n  }\n\n  static #createEndingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n\n    for (let i = this.totalPages - 4; i <= this.totalPages; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n  }\n\n  static #createMobileMarkup() {\n    if (this.totalPages <= 4) {\n      this.#totalMarkup += this.#firstPageMarkup;\n\n      for (let i = 2; i <= this.totalPages; i++) {\n        this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n      }\n      return;\n    }\n\n    if (this.currentPage <= 2) {\n      this.#createMobileStartingMarkup();\n      return;\n    }\n\n    if (this.currentPage === 3) {\n      this.#createMobileMiddleActivePageMarkup();\n      return;\n    }\n\n    if (this.totalPages - 1 <= this.currentPage && !(this.currentPage <= 3)) {\n      this.#createMobileEndingMarkup();\n      return;\n    }\n\n    if (this.currentPage === this.totalPages - 2) {\n      this.#createMobileMiddleActivePageMarkup();\n      return;\n    }\n\n    if (this.currentPage >= 4 && this.currentPage <= this.totalPages - 2) {\n      this.#createMobileMiddleActivePageMarkup();\n      return;\n    }\n  }\n\n  static #createMobileStartingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n\n    const maxRenderPagesNum = this.totalPages >= 4 ? 3 : this.totalPages;\n\n    for (let i = 2; i <= maxRenderPagesNum; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n\n    if (this.totalPages >= 4) {\n      this.#totalMarkup += this.#dotsRightMarkup;\n      this.#totalMarkup += this.#getLastPageMarkup();\n    }\n  }\n\n  static #createMobileMiddleActivePageMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n    this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(this.currentPage);\n    this.#totalMarkup += this.#dotsRightMarkup;\n    this.#totalMarkup += this.#getLastPageMarkup();\n  }\n\n  static #createMobileEndingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n\n    for (let i = this.totalPages - 2; i <= this.totalPages; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n  }\n\n  static #createSmallMobileMarkup() {\n    if (this.totalPages <= 3) {\n      this.#totalMarkup += this.#firstPageMarkup;\n\n      for (let i = 2; i <= this.totalPages; i++) {\n        this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n      }\n      return;\n    }\n\n    if (this.currentPage <= 2) {\n      this.#createSmallMobileStartingMarkup();\n      return;\n    }\n\n    if (this.totalPages - 1 <= this.currentPage && !(this.currentPage <= 2)) {\n      this.#createSmallMobileEndingMarkup();\n      return;\n    }\n\n    if (this.currentPage >= 3 && this.currentPage <= this.totalPages - 2) {\n      this.#createMobileMiddleActivePageMarkup();\n      return;\n    }\n  }\n\n  static #createSmallMobileStartingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n\n    const maxRenderPagesNum = this.totalPages >= 3 ? 2 : this.totalPages;\n\n    for (let i = 2; i <= maxRenderPagesNum; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n\n    if (this.totalPages >= 3) {\n      this.#totalMarkup += this.#dotsRightMarkup;\n      this.#totalMarkup += this.#getLastPageMarkup();\n    }\n  }\n\n  static #createSmallMobileEndingMarkup() {\n    this.#totalMarkup += this.#firstPageMarkup;\n    this.#totalMarkup += this.#dotsLeftMarkup;\n\n    for (let i = this.totalPages - 1; i <= this.totalPages; i++) {\n      this.#totalMarkup += this.#getPageBtnMarkupWithIdInsered(i);\n    }\n  }\n\n  static #afterRendering() {\n    this.#activateCurrentPageBtn();\n    this.#correctPaginationBarSize();\n  }\n\n  static #activateCurrentPageBtn() {\n    const activePageItem = document.getElementById(\n      `pagination-number-${this.currentPage}`\n    );\n    const activePageBtn = activePageItem.firstElementChild;\n    activePageBtn.classList.add('pagination__btn--active');\n  }\n\n  static #correctPaginationBarSize() {\n    // Scroll adjustment when we have a less than 4 pages in total\n    if (this.totalPages <= 4) {\n      this.#scrollBtn.classList.remove('scroll--absolute');\n    } else {\n      this.#scrollBtn.classList.add('scroll--absolute');\n    }\n\n    // For better experience, we lock the size of the bar if we have a lot of pages. So it is comfortable to switch between the pages by pressing the arrows buttons.\n    if (this.totalPages >= 8) {\n      this.paginationPagesList.classList.add('pagination__list--width-L');\n    } else {\n      this.paginationPagesList.classList.remove('pagination__list--width-L');\n    }\n  }\n\n  static #getPageBtnMarkupWithIdInsered(id) {\n    return `<li class=\"pagination__item\" id=\"pagination-number-${id}\"><button class=\"pagination__btn\" data-pagination=\"number\">${id}</button></li>`;\n  }\n\n  static #getLastPageMarkup() {\n    return `<li class=\"pagination__item\" id=\"pagination-number-${this.totalPages}\"><button class=\"pagination__btn\" data-pagination=\"number\">${this.totalPages}</button></li>`;\n  }\n}\n\nexport { PaginationAPI };\n","export class NotificationAPI {\n  static #NOTIFICATION_HIDE_DELAY = 10000;\n  static #DELETE_NOTIFICATION_EL_DELAY = 250;\n  static #numberOfMessages = 0;\n  static #notifTimeoutsIds = {};\n\n  static #notificationListEl;\n\n  static {\n    this.#notificationListEl = null;\n  }\n\n  constructor() {}\n\n  static init(rootElSelector, deltaYFromTop = 150) {\n    //adding root el for messages\n    const markup = `<ul class=\"notif-list\" id='notif-list-root'></ul>`;\n    document\n      .querySelector(rootElSelector)\n      .insertAdjacentHTML('afterbegin', markup);\n    document.querySelector('#notif-list-root').style.top = `${deltaYFromTop}px`;\n\n    this.#notificationListEl = document.querySelector('.notif-list');\n    this.#notificationListEl.addEventListener(\n      'click',\n      this.#onNotificationClick\n    );\n  }\n\n  static #onNotificationClick = e => {\n    if (e.target.nodeName !== 'P') return;\n\n    this.clearNotification(e.target.dataset.notifId);\n  };\n\n  static addNotification = (\n    text = '',\n    isAlert = false,\n    visibleDuration = null\n  ) => {\n    if (this.#numberOfMessages > 100) this.#numberOfMessages = 0;\n    this.#numberOfMessages++;\n\n    visibleDuration ??= this.#NOTIFICATION_HIDE_DELAY;\n    //render markup\n    const id = this.#numberOfMessages;\n    // prettier-ignore\n    const markup = `\n    <li class=\"notif-list__item\">\n      <p class=\"\n          notif-list__text\n          ${isAlert ? 'notif-list__text--alert' : ''}\n          notif-list__text--is-visible\" \n        data-notif-id=${id}>\n        ${text}\n      </p>\n    </li>\n    `;\n    this.#notificationListEl.insertAdjacentHTML('beforeend', markup);\n\n    //hide notification after timeout\n    this.#notifTimeoutsIds['' + id] = setTimeout(() => {\n      this.clearNotification(id);\n    }, visibleDuration);\n\n    return id;\n  };\n\n  static clearNotification = id => {\n    if (!this.#notifTimeoutsIds['' + id]) return;\n\n    clearInterval(this.#notifTimeoutsIds['' + id]);\n    delete this.#notifTimeoutsIds['' + id];\n\n    const notificationEl = document.querySelector(`p[data-notif-id=\"${id}\"]`);\n    notificationEl.classList.remove('notif-list__text--is-visible');\n    //completely remove notification message el from DOM\n    setTimeout(() => {\n      notificationEl.closest('li').remove();\n    }, this.#DELETE_NOTIFICATION_EL_DELAY);\n  };\n}\n","import { IDsParser } from '../utils/IDsToGenresParser.js';\nimport { BackendConfigStorage } from '../libs/BackendConfigStorage';\nimport { LDStorageAPI } from '../utils/LibraryDataStorageAPI.js';\nimport { Spinner } from '../components/Spinner';\n\nexport class MovieModalHandler {\n  #modalWindowEls = {\n    closeBtn: document.querySelector('.modal-close'),\n    queueBtn: document.querySelector('#queue-btn'),\n    watchedBtn: document.querySelector('#watched-btn'),\n    moviesNavBtnsWrapper: document.querySelector('#movies-nav-btns-wrapper'),\n    prevMovieBtn: document.querySelector('#prev-movie-btn'),\n    nextMovieBtn: document.querySelector('#next-movie-btn'),\n    modalBackdrop: document.querySelector('#movies-modal-window'),\n    libActionsBtnsWrapper: document.querySelector(\n      '#movie-modal-buttons-wrapper'\n    ),\n    posterImgEl: document.querySelector('#poster'),\n  };\n\n  #movieLibData = null;\n  #movieId = null;\n  #clickedMovieData = null;\n  #galleryAPI = null;\n  #spinner = null;\n\n  #nextMovieId = null;\n  #prevMovieId = null;\n\n  static MODE = {\n    HOME: 'home',\n    LIBRARY_WATCHED: 'lib-watch',\n    LIBRARY_QUEUED: 'lib-queue',\n  };\n  mode = null;\n\n  static MOVIE_ACTIONS = {\n    ADDED_TO_WATCHED: 'add_wchd',\n    REMOVED_FROM_WATCHED: 'rem_wchd',\n    ADDED_TO_QUEUED: 'add_queue',\n    REMOVED_FROM_QUEUED: 'rem_queue',\n  };\n\n  #onMoveStatusChangedCB = null;\n\n  constructor(galleryAPI, mode, onMoveStatusChangedCB) {\n    this.#galleryAPI = galleryAPI;\n    this.mode = mode;\n    this.#onMoveStatusChangedCB = onMoveStatusChangedCB;\n    this.#spinner = new Spinner(\n      '.modal-poster',\n      'loader-movie-modal',\n      Spinner.POSITION_MODE.FLEX_CENTRED\n    );\n\n    this.#modalWindowEls.libActionsBtnsWrapper.addEventListener(\n      'click',\n      this.#onLibraryButtonsClick\n    );\n\n    //removes display: none from element, which comes with html\n    this.#modalWindowEls.modalBackdrop.removeAttribute('style');\n  }\n\n  /**\n   *\n   * @param {number} movieId\n   */\n  onGalleryCardClicked = movieId => {\n    // this.#spinner.show();\n\n    //listener bindings\n    window.addEventListener('keydown', this.#onEscKeyPress);\n    this.#modalWindowEls.modalBackdrop.addEventListener(\n      'click',\n      this.#onBackdropClick\n    );\n    this.#modalWindowEls.closeBtn.addEventListener('click', this.#closeModal);\n    this.#modalWindowEls.moviesNavBtnsWrapper.addEventListener(\n      'click',\n      this.#onNavThroughMoviesBtnClick\n    );\n    //cut body content by viewport sizes to prevent from scrolling\n    document.body.classList.add('js-modal-is-hidden');\n\n    this.#movieId = movieId;\n    this.#setMovieData();\n\n    this.#renderModal(this.#clickedMovieData);\n    const { posterImgEl } = this.#modalWindowEls;\n    posterImgEl.addEventListener('load', this.#onPosterLoaded);\n    posterImgEl.addEventListener('error', this.#onPosterLoaded);\n  };\n\n  #setMovieData(movieCardLink = null) {\n    movieCardLink ??= document.querySelector(\n      `a[data-movie-id=\"${this.#movieId}\"]`\n    );\n\n    this.#prevMovieId = movieCardLink.dataset.prevMovieId;\n    this.#nextMovieId = movieCardLink.dataset.nextMovieId;\n    this.#movieLibData = LDStorageAPI.findInLocalStorage(this.#movieId);\n    this.#clickedMovieData = this.#getMovieDataByID(this.#movieId);\n  }\n\n  #renderModal(movieData) {\n    const {\n      genre_ids: genreIDs,\n      original_title: movieTitle,\n      name: movieName,\n      poster_path: pathToPoster,\n      vote_average: vote,\n      vote_count: votes,\n      popularity,\n      overview,\n    } = movieData;\n\n    const fixedAverageRating = vote ? vote.toFixed(1) : 'N/D';\n    const fixedPopularity = popularity ? popularity.toFixed(1) : 'N/D';\n    const movieGenresString = IDsParser.idsToGenres(genreIDs);\n    const posterFullPath =\n      BackendConfigStorage.pathToPoster + 'w500' + pathToPoster;\n\n    const refs = {\n      moviePoster: document.getElementById('poster'),\n      modalTitle: document.getElementById('modalTitle'),\n      movieAverageRating: document.getElementById('averageRating'),\n      movieRating: document.getElementById('rating'),\n      moviePopularity: document.getElementById('popularity'),\n      movieTitle: document.getElementById('title'),\n      movieGenre: document.getElementById('genre'),\n      movieAbout: document.getElementById('aboutMovie'),\n    };\n\n    if (pathToPoster) refs.moviePoster.src = `${posterFullPath}`;\n    refs.modalTitle.textContent = `${movieTitle ?? movieName}`;\n    refs.movieAverageRating.textContent = `${fixedAverageRating}`;\n    refs.movieRating.textContent = `${votes ? votes : 'N/D'}`;\n    refs.moviePopularity.textContent = `${fixedPopularity}`;\n    refs.movieTitle.textContent = `${movieTitle ?? movieName}`;\n    refs.movieGenre.textContent = `${\n      movieGenresString ? movieGenresString : 'N/D'\n    }`;\n    refs.movieAbout.textContent = `${overview ? overview : 'Sorry, no data'}`;\n\n    //placeholder logic\n    const modalPosterPlaceholder = document.getElementById('modal-placeholder');\n    const textInPlaceholder = document.querySelector(\n      '.modal-poster__placeholder-title'\n    );\n    const { posterImgEl } = this.#modalWindowEls;\n\n    if (!pathToPoster) {\n      modalPosterPlaceholder.classList.remove('is-hidden');\n      textInPlaceholder.textContent = `${movieTitle ?? movieName}`;\n      posterImgEl.classList.add('is-hidden');\n    } else {\n      modalPosterPlaceholder.classList.add('is-hidden');\n      posterImgEl.classList.remove('is-hidden');\n    }\n\n    //if there is image for poster - show spinner, else - hide it in case we going from image to placeholder\n    pathToPoster ? this.#spinner.show() : this.#spinner.hide();\n\n    //update text in library-related buttons according to movie's persistance in a library\n    this.#updateControlButtons(this.#movieLibData);\n    this.#updateMoviesNavButtons();\n\n    //show whole modal window\n    this.#modalWindowEls.modalBackdrop.classList.remove('is-hidden');\n  }\n\n  #updateControlButtons({ watched, queued }) {\n    this.#modalWindowEls.watchedBtn.textContent = `\n  ${watched ? 'REMOVE FROM' : 'ADD TO'} WATCHED`;\n    this.#modalWindowEls.queueBtn.textContent = `\n  ${queued ? 'REMOVE FROM' : 'ADD TO'} QUEUE`;\n  }\n\n  #updateMoviesNavButtons() {\n    this.#prevMovieId\n      ? this.#modalWindowEls.prevMovieBtn.removeAttribute('disabled')\n      : this.#modalWindowEls.prevMovieBtn.setAttribute('disabled', '');\n    this.#nextMovieId\n      ? this.#modalWindowEls.nextMovieBtn.removeAttribute('disabled')\n      : this.#modalWindowEls.nextMovieBtn.setAttribute('disabled', '');\n  }\n\n  #onLibraryButtonsClick = e => {\n    const oldMovieLibData = this.#movieLibData;\n    const movieNewLibData = this.#updateLSData(e.target.id);\n\n    const movieLibDelta = {\n      watchedChanged: oldMovieLibData.watched !== movieNewLibData.watched,\n      queuedChanged: oldMovieLibData.queued === movieNewLibData.queued,\n    };\n    let movieAction;\n    if (movieLibDelta.watchedChanged) {\n      movieAction = oldMovieLibData.watched\n        ? MovieModalHandler.MOVIE_ACTIONS.REMOVED_FROM_WATCHED\n        : MovieModalHandler.MOVIE_ACTIONS.ADDED_TO_WATCHED;\n    } else {\n      movieAction = oldMovieLibData.queued\n        ? MovieModalHandler.MOVIE_ACTIONS.REMOVED_FROM_QUEUED\n        : MovieModalHandler.MOVIE_ACTIONS.ADDED_TO_QUEUED;\n    }\n\n    this.#updateControlButtons(movieNewLibData);\n    this.#movieLibData = movieNewLibData;\n\n    this.#onMoveStatusChangedCB?.(movieAction);\n  };\n\n  #updateLSData(btnID) {\n    const movieNewLibData = {\n      ...LDStorageAPI.findInLocalStorage(this.#movieId),\n    };\n\n    if (btnID === 'queue-btn') {\n      movieNewLibData.queued\n        ? LDStorageAPI.removeFromLocalStorage(\n            this.#movieId,\n            LDStorageAPI.MOVIE_INFO.QUEUED\n          )\n        : LDStorageAPI.addToLocalStorage({\n            id: this.#movieId,\n            movieData: this.#clickedMovieData,\n            storageKey: LDStorageAPI.MOVIE_INFO.QUEUED,\n          });\n      movieNewLibData.queued = !movieNewLibData.queued;\n    } else {\n      movieNewLibData.watched\n        ? LDStorageAPI.removeFromLocalStorage(\n            this.#movieId,\n            LDStorageAPI.MOVIE_INFO.WATCHED\n          )\n        : LDStorageAPI.addToLocalStorage({\n            id: this.#movieId,\n            movieData: this.#clickedMovieData,\n            storageKey: LDStorageAPI.MOVIE_INFO.WATCHED,\n          });\n      movieNewLibData.watched = !movieNewLibData.watched;\n    }\n\n    return movieNewLibData;\n  }\n\n  #closeModal = () => {\n    const { posterImgEl } = this.#modalWindowEls;\n    this.#spinner.hide();\n\n    window.removeEventListener('keydown', this.#onEscKeyPress);\n    this.#modalWindowEls.modalBackdrop.removeEventListener(\n      'click',\n      this.#onBackdropClick\n    );\n    posterImgEl.removeEventListener('load', this.#onPosterLoaded);\n    posterImgEl.removeEventListener('error', this.#onPosterLoaded);\n\n    //hide whole modal\n    this.#modalWindowEls.modalBackdrop.classList.add('is-hidden');\n    //let body content scroll freely\n    document.body.classList.remove('js-modal-is-hidden');\n  };\n\n  #onBackdropClick = event => {\n    if (event.target === this.#modalWindowEls.modalBackdrop) {\n      this.#closeModal();\n    }\n  };\n\n  #onPosterLoaded = e => {\n    this.#spinner.hide();\n  };\n\n  #onNavThroughMoviesBtnClick = e => {\n    if (e.target.nodeName !== 'BUTTON') return;\n\n    const nextMovieId =\n      e.target.id === 'prev-movie-btn' ? this.#prevMovieId : this.#nextMovieId;\n    if (!nextMovieId) {\n      return;\n    }\n\n    this.#movieId = nextMovieId;\n    this.#setMovieData();\n    this.#updateMoviesNavButtons();\n    this.#renderModal(this.#clickedMovieData);\n  };\n\n  #onEscKeyPress = event => {\n    let nextMovieId = null;\n    let switchMovie = false;\n\n    switch (event.code) {\n      case 'Escape':\n        this.#closeModal();\n        break;\n      case 'ArrowLeft':\n        nextMovieId = this.#prevMovieId;\n        switchMovie = true;\n        break;\n      case 'ArrowRight':\n        nextMovieId = this.#nextMovieId;\n        switchMovie = true;\n        break;\n    }\n\n    //render next/previous movie data\n    if (switchMovie && nextMovieId) {\n      this.#movieId = nextMovieId;\n      this.#setMovieData();\n      this.#updateMoviesNavButtons();\n      this.#renderModal(this.#clickedMovieData);\n    }\n  };\n\n  #getMovieDataByID(ID) {\n    const moviesData = this.#galleryAPI.currentRenderedMoviesData;\n\n    return moviesData.find(({ id }) => id === +ID);\n  }\n}\n","const refs = {\n  openModalLink: document.querySelector('#open-team-modal'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  modal: document.querySelector('[data-modal]'),\n};\n\nlet isShow = false;\n\n//MAIN\n(() => {\n  refs.openModalLink.addEventListener('click', onOpenModalLinkClick);\n  refs.closeModalBtn.addEventListener('click', toggleModal);\n  refs.modal.addEventListener('click', onBackdropClick);\n  refs.modal.removeAttribute('style');\n})();\n\nfunction onOpenModalLinkClick(event) {\n  event.preventDefault();\n\n  toggleModal();\n}\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n  document.body.classList.toggle('js-modal-is-hidden');\n  isShow\n    ? document.body.removeEventListener('keydown', onKeyDown)\n    : document.body.addEventListener('keydown', onKeyDown);\n  isShow = !isShow;\n}\n\nfunction onBackdropClick(event) {\n  if (event.target != event.currentTarget) {\n    return;\n  }\n  toggleModal();\n}\n\nfunction onKeyDown(event) {\n  event.code === 'Escape' ? toggleModal() : null;\n}\n","const scrollBtn = document.getElementById('js-scroll');\nscrollBtn.addEventListener('click', () => window.scroll(0, 0));\nwindow.addEventListener('scroll', onScrollClick);\n\nfunction onScrollClick(e) {\n  e.preventDefault();\n  if (window.scrollY < 320) {\n    scrollBtn.classList.remove('scroll--isShown');\n  } else {\n    scrollBtn.classList.add('scroll--isShown');\n  }\n}\n","const switchButton = document.querySelector('#theme-button');\nswitchButton.onclick = toggleTheme;\n\ngetTheme();\n\nfunction getTheme() {\n  const theme = localStorage.getItem('theme');\n  theme && setTheme(theme);\n  if (theme === 'dark')\n    switchButton.classList.toggle('theme-button--dark-mode');\n}\n\nfunction setTheme(theme) {\n  document.documentElement.className = theme;\n  localStorage.setItem('theme', theme);\n}\n\nfunction toggleTheme() {\n  const theme = document.documentElement.classList.contains('dark')\n    ? 'light'\n    : 'dark';\n  switchButton.classList.toggle('theme-button--dark-mode');\n  setTheme(theme);\n}\n"],"names":["$e1dc8bc7dacbc265$var$_loadedImages","WeakMap","$e1dc8bc7dacbc265$var$_totalImages","$e1dc8bc7dacbc265$var$_pathToPoster","$e1dc8bc7dacbc265$var$_rootEl","$e1dc8bc7dacbc265$var$_onCriticalImagesLoadedCallbacks","$e1dc8bc7dacbc265$var$_onDeleteButtonClickedCB","$e1dc8bc7dacbc265$var$_onMovieCardClickedCB","$e1dc8bc7dacbc265$var$_currentMoviesData","$e1dc8bc7dacbc265$var$_spinner","$e1dc8bc7dacbc265$var$_posterImageCSSClass","$e1dc8bc7dacbc265$var$_renderCloseButton","$e1dc8bc7dacbc265$var$_MAX_NUM_OF_CRIT_IMAGES","$e1dc8bc7dacbc265$var$_NUMB_OF_IMAGES_TO_LOAD_AT_ONCE","$e1dc8bc7dacbc265$var$_numberOfCriticalImages","$e1dc8bc7dacbc265$var$_imagesElsToLoad","$e1dc8bc7dacbc265$var$_onCardClicked","$e1dc8bc7dacbc265$var$_createMovieCardMarkup","WeakSet","$e1dc8bc7dacbc265$var$_parseIDsToGenresString","$e1dc8bc7dacbc265$var$_onImageLoaded","$e1dc8bc7dacbc265$var$_trackImagesLoadingEnd","$e1dc8bc7dacbc265$var$_untrackImagesLoadingEnd","GalleryAPI","addOnCardClickCallback","cb","$e1dc8bc7dacbc265$var$_classPrivateFieldGet","this","addEventListener","removeOnCardClickCallback","removeEventListener","addOnCriticalImagesLoadedCallback","push","removeOnCriticalImagesLoadedCallback","$e1dc8bc7dacbc265$var$_classPrivateFieldSet","filter","existCallback","renderMoviesCards","moviesData","show","window","matchMedia","matches","imgsWithPoster","isAllCriticalAdded","$e1dc8bc7dacbc265$var$_classPrivateMethodGet","$e1dc8bc7dacbc265$var$_untrackImagesLoadingEnd2","call","cardsMarkup","reduce","acc","movieData","indx","arr","markup","hasPoster","$e1dc8bc7dacbc265$var$_createMovieCardMarkup2","id","innerHTML","$e1dc8bc7dacbc265$var$_trackImagesLoadingEnd2","document","querySelectorAll","hide","currentRenderedMoviesData","constructor","rootElementSelector","renderCloseButton","onMovieCardClickedCB","onDeleteButtonClickedCB","$e1dc8bc7dacbc265$var$_classPrivateMethodInitSpec","$e1dc8bc7dacbc265$var$_classPrivateFieldInitSpec","writable","value","e","movieCardLink","target","closest","clickedElNodeName","nodeName","preventDefault","movieId","dataset","Promise","resolve","_this$loadedImages","currentImageEl","getAttribute","numbOfImgsToLoadAtOnce","numberOfCriticalImages","counter","length","imageToLoadEl","shift","imgToLoadThumbEl","pathToPoster","src","removeAttribute","classList","remove","forEach","currImgThumbEl","type","setTimeout","complete","add","querySelector","BackendConfigStorage","Spinner","poster_path","title","name","genre_ids","vote_average","release_date","first_air_date","prevMovieID","nextMovieID","canBeCritical","releaseDate","slice","rating","Number","toFixed","genresStr","$e1dc8bc7dacbc265$var$_parseIDsToGenresString2","movieName","mustBeCritical","posterEl","IDs","isTooManyIDs","ids","parsedGenres","IDsParser","idsToGenres","el","allImagesEls","static","genre","$4b3e3c1c36c07e02$var$_classStaticPrivateMethodGet","$4b3e3c1c36c07e02$var$_findGenreByID","idToFind","foundedName","genresAndIDs","find","POSTER_SS_KEY","$cc905d85c9a35b42$var$_classStaticPrivateFieldSpecGet","$cc905d85c9a35b42$var$_PATH_TO_POSTER_SS_KEY","GENRES_DATA_LS_KEY","$cc905d85c9a35b42$var$_GENRES_DATA_LS_KEY","FETCH_MODES","$cc905d85c9a35b42$var$_GET_MODE","$cc905d85c9a35b42$var$_pathToPoster","$cc905d85c9a35b42$var$_genresAndIDs","sessionStorage","getItem","readFromLocalStorage","$cc905d85c9a35b42$var$_classStaticPrivateMethodGet","$cc905d85c9a35b42$var$_getDataFromBackend","PATH","setItem","GENRES_IDS","localStorage","JSON","stringify","$cc905d85c9a35b42$var$_classStaticPrivateFieldSpecSet","async","mode","res","$cc905d85c9a35b42$var$_tmdbAPI","getConfiguration","images","secure_base_url","getGenresData","genres","error","console","log","message","TMDBAPI","query","$c7babbbd069b8536$var$_classPrivateFieldGet","$c7babbbd069b8536$var$_BASE_URL","$c7babbbd069b8536$var$_API_KEY","$c7babbbd069b8536$var$_classPrivateMethodGet","$c7babbbd069b8536$var$_fetchByQuery","$c7babbbd069b8536$var$_fetchByQuery2","fetchedGenres","searchName","$c7babbbd069b8536$var$_moviesByNameQueryOptions","page","$c7babbbd069b8536$var$_fetchMovies","$c7babbbd069b8536$var$_fetchMovies2","$c7babbbd069b8536$var$_FETCH_MODES","NAME","pageNumber","getMoviesByName","TOP","$c7babbbd069b8536$var$_topMoviesQueryOptions","getTopMovies","currentPageByName","currentPageByTop","lastSearchedName","$c7babbbd069b8536$var$_classPrivateMethodInitSpec","$c7babbbd069b8536$var$_classPrivateFieldInitSpec","URL","includeAdult","timeWindow","byNameOptions","byTopOptions","response","fetch","status","json","Error","statusText","key","parseJson","parse","deltaFromRootElTop","innerHeight","setDeltaY","$1cb6d0d1cf339b50$var$_classPrivateFieldSet","$1cb6d0d1cf339b50$var$_rootElPrevPositionStyleValue","$1cb6d0d1cf339b50$var$_classPrivateFieldGet","$1cb6d0d1cf339b50$var$_rootEl","style","position","$1cb6d0d1cf339b50$var$_selfDOMEl","display","opacity","$1cb6d0d1cf339b50$var$_HIDE_DELAY","delta","$1cb6d0d1cf339b50$var$_innerSpinnerEl","top","spinnerClassToCreate","positioningMode","POSITION_MODE","STICKY_CENTRED","$1cb6d0d1cf339b50$var$_render","$1cb6d0d1cf339b50$var$_classPrivateFieldInitSpec","$1cb6d0d1cf339b50$var$_selfCSSClass","$1cb6d0d1cf339b50$var$_positionMode","$1cb6d0d1cf339b50$var$_classPrivateMethodGet","$1cb6d0d1cf339b50$var$_render2","FLEX_CENTRED","insertAdjacentHTML","LDStorageAPI","isInLibraryMode","$62ff4a7c218d7f9e$var$_classStaticPrivateFieldSpecSet","$62ff4a7c218d7f9e$var$_watched","MOVIE_INFO","WATCHED","$62ff4a7c218d7f9e$var$_queued","QUEUED","$62ff4a7c218d7f9e$var$_isInLibrary","$62ff4a7c218d7f9e$var$_activeStorageMode","$62ff4a7c218d7f9e$var$_activeStorage","Object","values","$62ff4a7c218d7f9e$var$_classStaticPrivateFieldSpecGet","$62ff4a7c218d7f9e$var$_paginationInfo","totalPages","$62ff4a7c218d7f9e$var$_classStaticPrivateMethodGet","$62ff4a7c218d7f9e$var$_countTotalPages","$62ff4a7c218d7f9e$var$_sliceMoviesArrayByPage","storageType","SEARCHED","$62ff4a7c218d7f9e$var$_searched","searchRequest","searchIn","filteredMoviesData","movieObj","toLowerCase","includes","lastSearchRequest","updateActiveStorage","storageKey","writeToLS","$62ff4a7c218d7f9e$var$_writeObjToLS","watched","queued","fromMovie","MOVIES_PER_PAGE","toMovie","paginationPagesQuantity","Math","ceil","obj","toAdd","$62ff4a7c218d7f9e$var$_defineProperty","PaginationAPI","isIncrementing","deltaPage","currentPage","newCurrentPage","$8fa0856b688fe5b6$var$_classStaticPrivateMethodGet","$8fa0856b688fe5b6$var$_renderPaginationMarkup","paginationPagesList","$8fa0856b688fe5b6$var$_classStaticPrivateFieldSpecGet","$8fa0856b688fe5b6$var$_totalMarkup","$8fa0856b688fe5b6$var$_afterRendering","renderPagination","$8fa0856b688fe5b6$var$_classStaticPrivateFieldSpecSet","paginationWrapperDiv","setAttribute","paginationNextBtn","disabled","paginationPreviousBtn","$8fa0856b688fe5b6$var$_firstPageMarkup","innerWidth","$8fa0856b688fe5b6$var$_MOBILE_MIN_WIDTH","$8fa0856b688fe5b6$var$_createSmallMobileMarkup","$8fa0856b688fe5b6$var$_MOBILE_MAX_WIDTH","$8fa0856b688fe5b6$var$_createMobileMarkup","i","$8fa0856b688fe5b6$var$_getPageBtnMarkupWithIdInsered","$8fa0856b688fe5b6$var$_getLastPageMarkup","$8fa0856b688fe5b6$var$_createStartingMarkup","$8fa0856b688fe5b6$var$_createMiddleActivePagesMarkup","$8fa0856b688fe5b6$var$_createEndingMarkup","maxRenderPagesNum","$8fa0856b688fe5b6$var$_dotsRightMarkup","$8fa0856b688fe5b6$var$_dotsLeftMarkup","$8fa0856b688fe5b6$var$_createMobileStartingMarkup","$8fa0856b688fe5b6$var$_createMobileMiddleActivePageMarkup","$8fa0856b688fe5b6$var$_createMobileEndingMarkup","$8fa0856b688fe5b6$var$_createSmallMobileStartingMarkup","$8fa0856b688fe5b6$var$_createSmallMobileEndingMarkup","$8fa0856b688fe5b6$var$_activateCurrentPageBtn","$8fa0856b688fe5b6$var$_correctPaginationBarSize","getElementById","firstElementChild","$8fa0856b688fe5b6$var$_scrollBtn","$8fa0856b688fe5b6$var$_defineProperty","NotificationAPI","rootElSelector","deltaYFromTop","$eed422341efdb58e$var$_classStaticPrivateFieldSpecSet","$eed422341efdb58e$var$_notificationListEl","$eed422341efdb58e$var$_classStaticPrivateFieldSpecGet","$eed422341efdb58e$var$_onNotificationClick","$eed422341efdb58e$var$_NOTIFICATION_HIDE_DELAY","$eed422341efdb58e$var$_DELETE_NOTIFICATION_EL_DELAY","$eed422341efdb58e$var$_numberOfMessages","$eed422341efdb58e$var$_notifTimeoutsIds","clearNotification","notifId","$eed422341efdb58e$var$_defineProperty","text","isAlert","visibleDuration","_this$numberOfMessage","clearInterval","notificationEl","$1a4527fee9690dbe$var$_modalWindowEls","$1a4527fee9690dbe$var$_movieLibData","$1a4527fee9690dbe$var$_movieId","$1a4527fee9690dbe$var$_clickedMovieData","$1a4527fee9690dbe$var$_galleryAPI","$1a4527fee9690dbe$var$_spinner","$1a4527fee9690dbe$var$_nextMovieId","$1a4527fee9690dbe$var$_prevMovieId","$1a4527fee9690dbe$var$_onMoveStatusChangedCB","$1a4527fee9690dbe$var$_setMovieData","$1a4527fee9690dbe$var$_renderModal","$1a4527fee9690dbe$var$_updateControlButtons","$1a4527fee9690dbe$var$_updateMoviesNavButtons","$1a4527fee9690dbe$var$_onLibraryButtonsClick","$1a4527fee9690dbe$var$_updateLSData","$1a4527fee9690dbe$var$_closeModal","$1a4527fee9690dbe$var$_onBackdropClick","$1a4527fee9690dbe$var$_onPosterLoaded","$1a4527fee9690dbe$var$_onNavThroughMoviesBtnClick","$1a4527fee9690dbe$var$_onEscKeyPress","$1a4527fee9690dbe$var$_getMovieDataByID","MovieModalHandler","galleryAPI","onMoveStatusChangedCB","$1a4527fee9690dbe$var$_classPrivateMethodInitSpec","$1a4527fee9690dbe$var$_classPrivateFieldInitSpec","closeBtn","queueBtn","watchedBtn","moviesNavBtnsWrapper","prevMovieBtn","nextMovieBtn","modalBackdrop","libActionsBtnsWrapper","posterImgEl","$1a4527fee9690dbe$var$_defineProperty","$1a4527fee9690dbe$var$_classPrivateFieldGet","body","$1a4527fee9690dbe$var$_classPrivateFieldSet","$1a4527fee9690dbe$var$_classPrivateMethodGet","$1a4527fee9690dbe$var$_setMovieData2","$1a4527fee9690dbe$var$_renderModal2","oldMovieLibData","movieNewLibData","$1a4527fee9690dbe$var$_updateLSData2","movieLibDelta","movieAction","MOVIE_ACTIONS","REMOVED_FROM_WATCHED","ADDED_TO_WATCHED","REMOVED_FROM_QUEUED","ADDED_TO_QUEUED","$1a4527fee9690dbe$var$_updateControlButtons2","event","nextMovieId","$1a4527fee9690dbe$var$_updateMoviesNavButtons2","switchMovie","code","prevMovieId","findInLocalStorage","$1a4527fee9690dbe$var$_getMovieDataByID2","genreIDs","original_title","movieTitle","vote","vote_count","votes","popularity","overview","fixedAverageRating","fixedPopularity","movieGenresString","posterFullPath","refs","moviePoster","modalTitle","movieAverageRating","movieRating","moviePopularity","movieGenre","movieAbout","textContent","modalPosterPlaceholder","textInPlaceholder","btnID","removeFromLocalStorage","addToLocalStorage","ID","HOME","LIBRARY_WATCHED","LIBRARY_QUEUED","openModalLink","closeModalBtn","modal","isShow","onOpenModalLinkClick","toggleModal","toggle","onKeyDown","onBackdropClick","currentTarget","scrollBtn","scroll","scrollY","switchButton","setTheme","theme","documentElement","className","onclick","contains","getTheme"],"version":3,"file":"index.ee512941.js.map"}